<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="John Flournoy" />

<meta name="date" content="2021-01-29" />

<title>CARIT Report</title>

<script src="carit_report_files/jquery-1.12.4/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="carit_report_files/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="carit_report_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="carit_report_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="carit_report_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="carit_report_files/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="carit_report_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="carit_report_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="carit_report_files/navigation-1.1/tabsets.js"></script>
<script src="carit_report_files/navigation-1.1/codefolding.js"></script>
<link href="carit_report_files/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="carit_report_files/highlightjs-9.12.0/highlight.js"></script>
<script src="carit_report_files/htmlwidgets-1.3/htmlwidgets.js"></script>
<link href="carit_report_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="carit_report_files/datatables-binding-0.16/datatables.js"></script>
<link href="carit_report_files/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="carit_report_files/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="carit_report_files/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="carit_report_files/dt-ext-buttons-1.10.20/css/buttons.dataTables.min.css" rel="stylesheet" />
<script src="carit_report_files/dt-ext-buttons-1.10.20/js/dataTables.buttons.min.js"></script>
<script src="carit_report_files/dt-ext-buttons-1.10.20/js/buttons.flash.min.js"></script>
<script src="carit_report_files/dt-ext-buttons-1.10.20/js/buttons.html5.min.js"></script>
<script src="carit_report_files/dt-ext-buttons-1.10.20/js/buttons.colVis.min.js"></script>
<script src="carit_report_files/dt-ext-buttons-1.10.20/js/buttons.print.min.js"></script>
<link href="carit_report_files/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
<script src="carit_report_files/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="carit_report_files/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
<script src="carit_report_files/selectize-0.12.0/selectize.min.js"></script>
<link href="carit_report_files/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="carit_report_files/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
      </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">CARIT Report</h1>
<h4 class="author">John Flournoy</h4>
<h4 class="date">2021-01-29</h4>

</div>


<style type="text/css">
@import url('https://fonts.googleapis.com/css?family=Didact+Gothic&display=swap');
@import url('https://fonts.googleapis.com/css?family=Fira+Code&display=swap');
body{
  font-family: 'Didact Gothic',  sans-serif;
}
pre code {
  font-family: 'Fira Code',  monospace;
}
</style>
<div id="process-data" class="section level1">
<h1>Process data</h1>
<pre class="r"><code>library(data.table)
library(psycho)
data.table::setDTthreads(3)

modal &lt;- function(x){
  t &lt;- table(unlist(x))
  n &lt;- dimnames(t)[[1]]
  return(n[which(t == max(t))])
}

read_carit_dir &lt;- function(data_path, pattern = &quot;*CARIT.*run[12]_wide.csv&quot;){
  #List all of the CARIT task files in the data directory
  fnames &lt;- dir(data_path, 
                pattern = pattern, 
                recursive = TRUE, 
                full.names = TRUE)
  names(fnames) &lt;- 1:length(fnames)
  
  #Set the column names we want from each csv file
  col_select &lt;- c(&#39;condFile&#39;, &#39;trialNum&#39;, &#39;stim&#39;,
                  &#39;corrAns&#39;, &#39;prepotency&#39;, &#39;ISI&#39;,
                  &#39;shapeStartTime&#39;, &#39;shapeEndTime&#39;, 
                  &#39;fixStartTime&#39;,&#39;fixEndTime&#39;,
                  &#39;nogoCondition&#39;,&#39;resp&#39;, 
                  &#39;trialResp.firstKey&#39;, &#39;trialResp.firstRt&#39;,
                  &#39;corrRespMsg&#39;, &#39;corrRespCode&#39;, 
                  &#39;corrRespTrialType&#39;,&#39;isiPress.keys&#39;,
                  &#39;isiPress.rt&#39;, &#39;hitCount&#39;, &#39;missCount&#39;,
                  &#39;falseAlarmCount&#39;, &#39;corrRejectCount&#39;, 
                  &#39;totalAcc&#39;, &#39;goAcc&#39;, &#39;nogoAcc&#39;, 
                  &#39;goFiveBackAvg&#39;, &#39;nogoFiveBackAvg&#39;,
                  &#39;totalFiveBackAvg&#39;)
  
  #create a temporary data frame of all the data from all the csv files
  adf &lt;- data.table::rbindlist(
    lapply(fnames, function(f){
      #remove the first 4 rows of each data frame.
      data.table::fread(f, select = col_select)[-(1:4),]
    }),
    idcol = TRUE)
  
  #combine information about the files with the temporary data frame.
  d &lt;- data.table(.id = names(fnames),
                  filename = fnames,
                  sessionID = gsub(&#39;.*(HCD[A-Za-z0-9]+_V[0-9]_[A|B|X]).*&#39;, &#39;\\1&#39;, fnames),
                  sID = gsub(&#39;.*(HCD[A-Za-z0-9]+)_V[0-9]_[A|B|X].*&#39;, &#39;\\1&#39;, fnames))[adf, on = &#39;.id&#39;]
  return(d)
}

workspace_fname &lt;- &#39;process_carit.rda&#39;
if(!file.exists(workspace_fname)){
  
  data_path &lt;- &#39;/ncf/hcp/data/CCF_HCD_STG_PsychoPy_files/&#39;
  intake_data_path &lt;- &#39;/ncf/hcp/data/intradb_intake/&#39;
  
  d &lt;- read_carit_dir(data_path)
  d_intake &lt;- read_carit_dir(intake_data_path)
  #remove long
  
  readr::write_csv(d, &#39;CARIT_allRaw.csv&#39;)
  
  demos &lt;- data.table::fread(&#39;HCPD_COMBINED20200608.csv&#39;,
                             select = c(&#39;id&#39;, &#39;age&#39;, &#39;gender&#39;, &#39;site&#39;, &#39;RACE&#39;, &#39;SES_PLVL&#39;, &#39;SES_RLVL&#39;, &#39;income&#39;))
  staged &lt;- data.table::fread(&#39;ccf_hcd_stg_2020-06-09.csv&#39;, 
                              select = &#39;Subject&#39;)
  public_release &lt;- data.table::fread(&#39;HCD_V1_Release_Struct+fMRI_Merged_Adj.txt&#39;, header = FALSE, col.names = &#39;sID&#39;)
  
  long &lt;- data.table::fread(&#39;HCPD_LONGITUDINAL20200608.csv&#39;,
                            select = c(&#39;id&#39;, &#39;LONG_AGE&#39;))
  staged_dlmri &lt;- data.table(sessionID = dir(&#39;/ncf/hcp/data/intradb_multiprocfix/&#39;, pattern = &quot;HCD.*&quot;))
  
  staged_dlmri[, &#39;has_task_scan&#39;] &lt;-  unlist(lapply(staged_dlmri$sessionID, function(sess){
    length(dir(file.path(&#39;/ncf/hcp/data/intradb_multiprocfix/&#39;, 
                         sess, 
                         &#39;/MultiRunIcaFix_proc/&#39;,
                         sess, 
                         &#39;/MNINonLinear/Results/&#39;), pattern = &#39;tfMRI.*&#39;)) &gt; 0
  }))
  
  staged_dlmri[, &#39;has_carit&#39;] &lt;-  unlist(lapply(staged_dlmri$sessionID, function(sess){
    length(dir(file.path(&#39;/ncf/hcp/data/intradb_multiprocfix/&#39;, 
                         sess, 
                         &#39;/MultiRunIcaFix_proc/&#39;,
                         sess, 
                         &#39;/MNINonLinear/Results/&#39;), pattern = &#39;tfMRI_CARIT.*&#39;)) &gt; 0
  }))
  
  staged_dlmri[, &#39;has_guessing&#39;] &lt;-  unlist(lapply(staged_dlmri$sessionID, function(sess){
    length(dir(file.path(&#39;/ncf/hcp/data/intradb_multiprocfix/&#39;, 
                         sess, 
                         &#39;/MultiRunIcaFix_proc/&#39;,
                         sess, 
                         &#39;/MNINonLinear/Results/&#39;), pattern = &#39;tfMRI_GUESSING.*&#39;)) &gt; 0
  }))
  
  staged_dlmri[, sID := gsub(&#39;.*(HCD[A-Za-z0-9]+)_V1_MR.*&#39;, &#39;\\1&#39;, sessionID)]
  setnames(demos, &#39;id&#39;, &#39;sID&#39;)
  setnames(staged, &#39;Subject&#39;, &#39;sID&#39;)
  setnames(long, &#39;id&#39;, &#39;sID&#39;)
  
  #Some columns should be factors
  factor_vars &lt;- c(&#39;sessionID&#39;,
                   &#39;stim&#39;,
                   &#39;corrAns&#39;,
                   &#39;prepotency&#39;,
                   &#39;nogoCondition&#39;,
                   &#39;resp&#39;,
                   &#39;trialResp.firstKey&#39;,
                   &#39;corrRespMsg&#39;,
                   &#39;corrRespTrialType&#39;)
  d[, (factor_vars) := lapply(.SD, as.factor), .SDcols = factor_vars]
  d_intake[, (factor_vars) := lapply(.SD, as.factor), .SDcols = factor_vars]
  
  d_combined &lt;- data.table::rbindlist(list(staged = d, intake = d_intake), idcol = &quot;data_source&quot;)
  
  #Integrate demographic variables
  carit &lt;- demos[d_combined, on = &#39;sID&#39;]
  
  #use the condition file name to figure out the run number
  setnames(carit, &#39;condFile&#39;, &#39;runN&#39;)
  carit[, runN := as.numeric(gsub(&#39;.*/scan([12])\\.csv&#39;, &#39;\\1&#39;, runN))]
  
  #rename corrAns to trialType
  setnames(carit, &#39;corrAns&#39;, &#39;trialType&#39;)
  
  #relabel the nogo condtion to be more accurate
  carit[, nogoCondition := factor(nogoCondition,levels=c(&quot;prevRewNogo&quot;,&quot;neutralNogo&quot;),labels=c(&quot;prevRewNogo&quot;,&quot;prevLossNogo&quot;)) 
        ]
  #relabel the prepotency factor to be more clear 
  carit[, prepotency := factor(prepotency,levels=c(&quot;2&quot;,&quot;3&quot;,&quot;4&quot;),labels=c(&quot;2go&quot;,&quot;3go&quot;,&quot;4go&quot;))]
  #aggTrialN is trial number across both runs
  carit[, aggTrialN := trialNum + 92*(runN - 1)]
  carit[, RT.shape := trialResp.firstRt - shapeStartTime]
  
  carit_by_run_SDT &lt;- dcast(carit[, .N, by = c(&#39;sID&#39;, &#39;runN&#39;, &#39;corrRespTrialType&#39;) ], ... ~ corrRespTrialType, value.var = &#39;N&#39;, fill =  0) 
  carit_by_run_SDT[, c(&#39;dprime&#39;, &#39;beta&#39;, &#39;aprime&#39;, &#39;bppd&#39;, &#39;c&#39;) := psycho::dprime(Hit, falseAlarm, Miss, corReject)]
  
  readr::write_csv(carit,&quot;CARIT_allSubs.csv&quot;)
  readr::write_csv(carit_by_run_SDT,&quot;CARIT_allSubs_dprime.csv&quot;)
  save.image(file = workspace_fname)
} else {
  load(workspace_fname)
}</code></pre>
<p>At the moment, there are 2 participants who have too many trials for one run. The raw data file indicates that the same conditions file was used for each one, but it also indicates that only 1 run was run. We may ultimately be able to use these cases but I'm setting them aside for now.</p>
<pre class="r"><code>#remove longitudinal subjects:
carit &lt;- carit[!grepl(&#39;_V[2-9]_&#39;, filename),]
###INVESTIGATE FURTHER
duplicate_run_ids &lt;- unique(carit[, .N, by = c(&#39;sID&#39;, &#39;runN&#39;)][N &gt; 92, sID])
print(duplicate_run_ids)</code></pre>
<pre><code>## [1] &quot;HCD0197045&quot; &quot;HCD0353538&quot;</code></pre>
<pre class="r"><code>dim(carit)</code></pre>
<pre><code>## [1] 203035     43</code></pre>
<pre class="r"><code>carit &lt;- carit[!sID %in% duplicate_run_ids]
dim(carit)</code></pre>
<pre><code>## [1] 202667     43</code></pre>
</div>
<div id="data-cross-check" class="section level1">
<h1>Data cross-check</h1>
<p>Total N with CARIT task behavior: 811.</p>
<p>Number of participants with CARIT task behavior but no demo info: 0.</p>
<p>Number of participants with demo info but no CARIT task behavior: 411.</p>
<p>Number of participants with CARIT task behavior but not staged: 0.</p>
<p>Number of participants staged but no CARIT task behavior: 12. These participants likely did not complete the task, though other data is relevant for staging.</p>
<p>Number of participants with task behavior not staged, recovered from intake project: 370</p>
<p>Number of intake participants with no demo info: 1. Participant ids: HCD0425133.</p>
<p>Number of participants not in either intake or staged CARIT behavior lists: 42.</p>
<p>List of those:</p>
<p>HCD0009422, HCD0123824, HCD0147838, HCD0156435, HCD0168442, HCD0191033, HCD0263335, HCD0412629, HCD0505333, HCD0577358, HCD0696265, HCD0874364, HCD1022015, HCD1045128, HCD1136232, HCD1179755, HCD1275347, HCD1406235, HCD1506037, HCD1529756, HCD1581455, HCD1690359, HCD1748768, HCD1790868, HCD1822249, HCD1876272, HCD1985378, HCD2059043, HCD2139748, HCD2162036, HCD2292453, HCD2442446, HCD2519556, HCD2572156, HCD2604749, HCD2779077, HCD2833259, HCD2867478, HCD2868985, HCD2891576, HCD2925769, HCD2944066</p>
<p>Spot check suggests these sessions may be missing some data for the task, or have other problems.</p>
<pre class="r"><code>intradb_beh_only_list &lt;- demos[!d, on = &#39;sID&#39;]
setnames(intradb_beh_only_list, &#39;sID&#39;, &#39;Subject&#39;)
readr::write_csv(intradb_beh_only_list, &#39;~/code/intradb_sync/HCPD_behavior_only.csv&#39;)</code></pre>
<pre class="r"><code>do.call(DT::datatable, 
        c(list(staged[!d, on = &#39;sID&#39;],
               caption = &#39;Pariticipants marked as staged, with no CARIT data.&#39;), 
          dt_options))</code></pre>
<div id="htmlwidget-44a84b00e9174b6f5a68" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-44a84b00e9174b6f5a68">{"x":{"filter":"top","filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons"],"caption":"<caption>Pariticipants marked as staged, with no CARIT data.<\/caption>","data":[["HCD0577358","HCD0696265","HCD1045128","HCD1249649","HCD1336341","HCD1529756","HCD1581455","HCD1638862","HCD1714852","HCD1876272","HCD1985378","HCD2082341"]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th>sID<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Bfrtip","buttons":["csv"],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
<p>Number of participants with dl'd MRI but not in staging list: 0.</p>
<p>Number of participants in staging list without any dl'd MRI: 2.</p>
<p>Personal communication with Mike Hodge:</p>
<blockquote>
<p>Sometimes when we find issues with the staging sessions after they’re built, we’ll remove the sessions so they’re not inadvertently released. We’ll often not remove the corresponding subject record because we’ll eventually rebuild that session. I’m sure that’s what happened here.</p>
</blockquote>
<p>Number of participants with (any) dowloaded task MRI, but no CARIT task behavior: 5.</p>
<p>Number of participants with dowloaded CARIT task MRI, but no CARIT task behavior: 0.</p>
<p>Number of participants with CARIT task behavior, but no dowloaded task MRI (on this task): 4. This indicates that these participants had problems with their data in the multirun ica fix pipeline (it is possible that this session will eventually get rebuilt, it seems).</p>
<pre class="r"><code>missing_task_mri &lt;- unique(d[, c(&#39;sessionID&#39;, &#39;sID&#39;)])[!staged_dlmri[has_task_scan == TRUE], on = &#39;sID&#39;]

do.call(DT::datatable, 
        c(list(demos[missing_task_mri, on = &#39;sID&#39;],
               caption = &#39;Participants with CARIT task behavior, but no dowloaded task MRI (on this task).&#39;), 
          dt_options))</code></pre>
<div id="htmlwidget-dc47e17276d380e3a81c" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-dc47e17276d380e3a81c">{"x":{"filter":"top","filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"12.15\" data-max=\"14.07\" data-scale=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"disabled\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"disabled\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"disabled\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"0\" data-max=\"1e-15\" data-scale=\"15\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;HCD0001305_V1_A&quot;,&quot;HCD0008117_V1_A&quot;,&quot;HCD0015417_V1_A&quot;,&quot;HCD0021614_V1_A&quot;,&quot;HCD0022919_V1_B&quot;,&quot;HCD0026119_V1_A&quot;,&quot;HCD0029630_V1_A&quot;,&quot;HCD0031617_V1_A&quot;,&quot;HCD0036324_V1_A&quot;,&quot;HCD0039128_V1_A&quot;,&quot;HCD0040113_V1_A&quot;,&quot;HCD0041822_V1_A&quot;,&quot;HCD0042420_V1_A&quot;,&quot;HCD0045527_V1_A&quot;,&quot;HCD0051825_V1_A&quot;,&quot;HCD0059235_V1_A&quot;,&quot;HCD0069238_V1_A&quot;,&quot;HCD0071831_V1_A&quot;,&quot;HCD0073431_V1_B&quot;,&quot;HCD0075435_V1_A&quot;,&quot;HCD0100307_V1_A&quot;,&quot;HCD0102210_V1_A&quot;,&quot;HCD0102412_V1_A&quot;,&quot;HCD0110310_V1_A&quot;,&quot;HCD0110411_V1_A&quot;,&quot;HCD0111716_V1_A&quot;,&quot;HCD0113316_V1_A&quot;,&quot;HCD0114419_V1_A&quot;,&quot;HCD0118528_V1_A&quot;,&quot;HCD0119429_V1_A&quot;,&quot;HCD0121719_V1_A&quot;,&quot;HCD0122317_V1_A&quot;,&quot;HCD0123925_V1_A&quot;,&quot;HCD0124725_V1_A&quot;,&quot;HCD0125424_V1_A&quot;,&quot;HCD0128935_V1_A&quot;,&quot;HCD0129937_V1_A&quot;,&quot;HCD0130821_V1_A&quot;,&quot;HCD0131116_V1_A&quot;,&quot;HCD0134526_V1_A&quot;,&quot;HCD0135831_V1_A&quot;,&quot;HCD0143426_V1_A&quot;,&quot;HCD0144125_V1_A&quot;,&quot;HCD0145430_V1_A&quot;,&quot;HCD0145733_V1_A&quot;,&quot;HCD0146331_V1_A&quot;,&quot;HCD0146937_V1_A&quot;,&quot;HCD0147333_V1_A&quot;,&quot;HCD0148537_V1_A&quot;,&quot;HCD0152932_V1_A&quot;,&quot;HCD0154431_V1_A&quot;,&quot;HCD0161327_V1_A&quot;,&quot;HCD0165234_V1_A&quot;,&quot;HCD0165941_V1_A&quot;,&quot;HCD0174235_V1_A&quot;,&quot;HCD0178243_V1_A&quot;,&quot;HCD0178748_V1_A&quot;,&quot;HCD0181838_V1_A&quot;,&quot;HCD0182941_V1_A&quot;,&quot;HCD0183438_V1_A&quot;,&quot;HCD0183539_V1_A&quot;,&quot;HCD0185442_V1_A&quot;,&quot;HCD0185644_V1_A&quot;,&quot;HCD0188549_V1_A&quot;,&quot;HCD0193845_V1_A&quot;,&quot;HCD0197045_V1_A&quot;,&quot;HCD0197348_V1_A&quot;,&quot;HCD0203620_V1_A&quot;,&quot;HCD0214423_V1_A&quot;,&quot;HCD0215829_V1_A&quot;,&quot;HCD0222018_V1_A&quot;,&quot;HCD0224123_V1_A&quot;,&quot;HCD0225529_V1_A&quot;,&quot;HCD0225630_V1_A&quot;,&quot;HCD0232223_V1_A&quot;,&quot;HCD0236130_V1_A&quot;,&quot;HCD0236635_V1_A&quot;,&quot;HCD0244230_V1_A&quot;,&quot;HCD0245030_V1_A&quot;,&quot;HCD0245636_V1_A&quot;,&quot;HCD0247438_V1_A&quot;,&quot;HCD0248440_V1_A&quot;,&quot;HCD0259243_V1_A&quot;,&quot;HCD0259546_V1_A&quot;,&quot;HCD0263032_V1_A&quot;,&quot;HCD0267242_V1_A&quot;,&quot;HCD0267747_V1_A&quot;,&quot;HCD0267848_V1_A&quot;,&quot;HCD0271031_V1_A&quot;,&quot;HCD0276243_V1_B&quot;,&quot;HCD0277447_V1_A&quot;,&quot;HCD0286650_V1_A&quot;,&quot;HCD0288250_V1_A&quot;,&quot;HCD0294245_V1_A&quot;,&quot;HCD0295146_V1_B&quot;,&quot;HCD0295954_V1_A&quot;,&quot;HCD0298758_V1_A&quot;,&quot;HCD0304828_V1_A&quot;,&quot;HCD0305325_V1_A&quot;,&quot;HCD0305628_V1_A&quot;,&quot;HCD0311118_V1_A&quot;,&quot;HCD0311320_V1_A&quot;,&quot;HCD0311421_V1_B&quot;,&quot;HCD0320624_V1_A&quot;,&quot;HCD0328842_V1_A&quot;,&quot;HCD0330021_V1_A&quot;,&quot;HCD0336841_V1_A&quot;,&quot;HCD0338441_V1_A&quot;,&quot;HCD0338744_V1_A&quot;,&quot;HCD0343333_V1_A&quot;,&quot;HCD0353538_V1_A&quot;,&quot;HCD0360838_V1_A&quot;,&quot;HCD0363743_V1_A&quot;,&quot;HCD0367448_V1_A&quot;,&quot;HCD0370639_V1_A&quot;,&quot;HCD0372542_V1_A&quot;,&quot;HCD0378150_V1_A&quot;,&quot;HCD0382343_V1_A&quot;,&quot;HCD0383143_V1_A&quot;,&quot;HCD0392144_V1_A&quot;,&quot;HCD0392649_V1_A&quot;,&quot;HCD0393550_V1_A&quot;,&quot;HCD0394350_V1_A&quot;,&quot;HCD0394754_V1_A&quot;,&quot;HCD0401725_V1_A&quot;,&quot;HCD0403224_V1_A&quot;,&quot;HCD0406230_V1_A&quot;,&quot;HCD0410322_V1_A&quot;,&quot;HCD0413732_V1_A&quot;,&quot;HCD0418338_V1_A&quot;,&quot;HCD0425335_V1_A&quot;,&quot;HCD0429343_V1_A&quot;,&quot;HCD0430530_V1_A&quot;,&quot;HCD0461844_V1_A&quot;,&quot;HCD0462341_V1_A&quot;,&quot;HCD0469658_V1_A&quot;,&quot;HCD0471746_V1_A&quot;,&quot;HCD0474045_V1_A&quot;,&quot;HCD0476352_V1_A&quot;,&quot;HCD0478356_V1_A&quot;,&quot;HCD0486254_V1_A&quot;,&quot;HCD0494354_V1_A&quot;,&quot;HCD0498261_V1_A&quot;,&quot;HCD0498968_V1_A&quot;,&quot;HCD0504735_V1_A&quot;,&quot;HCD0505838_V1_A&quot;,&quot;HCD0508440_V1_A&quot;,&quot;HCD0514738_V1_A&quot;,&quot;HCD0515538_V1_A&quot;,&quot;HCD0517845_V1_A&quot;,&quot;HCD0519849_V1_A&quot;,&quot;HCD0520329_V1_A&quot;,&quot;HCD0526644_V1_A&quot;,&quot;HCD0528850_V1_A&quot;,&quot;HCD0529751_V1_A&quot;,&quot;HCD0534138_V1_A&quot;,&quot;HCD0536142_V1_A&quot;,&quot;HCD0541034_V1_A&quot;,&quot;HCD0541539_V1_A&quot;,&quot;HCD0551239_V1_A&quot;,&quot;HCD0551946_V1_A&quot;,&quot;HCD0555146_V1_A&quot;,&quot;HCD0559760_V1_B&quot;,&quot;HCD0571649_V1_A&quot;,&quot;HCD0574049_V1_A&quot;,&quot;HCD0574756_V1_A&quot;,&quot;HCD0576558_V1_A&quot;,&quot;HCD0577661_V1_A&quot;,&quot;HCD0580751_V1_A&quot;,&quot;HCD0581652_V1_A&quot;,&quot;HCD0583555_V1_A&quot;,&quot;HCD0584860_V1_A&quot;,&quot;HCD0590047_V1_A&quot;,&quot;HCD0605135_V1_A&quot;,&quot;HCD0605438_V1_A&quot;,&quot;HCD0614035_V1_A&quot;,&quot;HCD0614237_V1_A&quot;,&quot;HCD0616342_V1_A&quot;,&quot;HCD0619247_V1_A&quot;,&quot;HCD0621638_V1_A&quot;,&quot;HCD0626446_V1_A&quot;,&quot;HCD0627549_V1_A&quot;,&quot;HCD0627852_V1_A&quot;,&quot;HCD0628854_V1_A&quot;,&quot;HCD0630134_V1_A&quot;,&quot;HCD0641038_V1_A&quot;,&quot;HCD0641341_V1_A&quot;,&quot;HCD0643345_V1_A&quot;,&quot;HCD0644044_V1_A&quot;,&quot;HCD0644852_V1_A&quot;,&quot;HCD0657558_V1_A&quot;,&quot;HCD0662955_V1_A&quot;,&quot;HCD0664656_V1_A&quot;,&quot;HCD0667763_V1_A&quot;,&quot;HCD0671956_V1_A&quot;,&quot;HCD0676764_V1_A&quot;,&quot;HCD0678970_V1_A&quot;,&quot;HCD0679770_V1_B&quot;,&quot;HCD0682557_V1_A&quot;,&quot;HCD0684460_V1_A&quot;,&quot;HCD0686666_V1_A&quot;,&quot;HCD0692964_V1_A&quot;,&quot;HCD0694564_V1_A&quot;,&quot;HCD0697671_V1_A&quot;,&quot;HCD0697772_V1_A&quot;,&quot;HCD0703943_V1_A&quot;,&quot;HCD0714443_V1_A&quot;,&quot;HCD0715243_V1_A&quot;,&quot;HCD0717954_V1_A&quot;,&quot;HCD0719352_V1_A&quot;,&quot;HCD0721440_V1_A&quot;,&quot;HCD0743955_V1_A&quot;,&quot;HCD0750649_V1_A&quot;,&quot;HCD0752855_V1_A&quot;,&quot;HCD0755962_V1_A&quot;,&quot;HCD0758867_V1_A&quot;,&quot;HCD0762959_V1_A&quot;,&quot;HCD0764256_V1_A&quot;,&quot;HCD0772255_V1_A&quot;,&quot;HCD0772760_V1_A&quot;,&quot;HCD0777265_V1_A&quot;,&quot;HCD0784060_V1_A&quot;,&quot;HCD0786771_V1_A&quot;,&quot;HCD0788674_V1_A&quot;,&quot;HCD0789272_V1_A&quot;,&quot;HCD0795267_V1_A&quot;,&quot;HCD0796067_V1_A&quot;,&quot;HCD0797877_V1_A&quot;,&quot;HCD0798273_V1_A&quot;,&quot;HCD0801539_V1_A&quot;,&quot;HCD0802440_V1_A&quot;,&quot;HCD0804545_V1_A&quot;,&quot;HCD0806751_V1_A&quot;,&quot;HCD0808654_V1_A&quot;,&quot;HCD0810035_V1_A&quot;,&quot;HCD0812241_V1_A&quot;,&quot;HCD0812746_V1_A&quot;,&quot;HCD0822850_V1_A&quot;,&quot;HCD0842250_V1_A&quot;,&quot;HCD0845458_V1_A&quot;,&quot;HCD0848060_V1_A&quot;,&quot;HCD0848565_V1_A&quot;,&quot;HCD0848969_V1_A&quot;,&quot;HCD0852253_V1_A&quot;,&quot;HCD0855562_V1_A&quot;,&quot;HCD0857566_V1_A&quot;,&quot;HCD0858467_V1_A&quot;,&quot;HCD0861052_V1_A&quot;,&quot;HCD0869371_V1_A&quot;,&quot;HCD0889579_V1_A&quot;,&quot;HCD0891566_V1_A&quot;,&quot;HCD0894875_V1_B&quot;,&quot;HCD0899582_V1_A&quot;,&quot;HCD0900440_V1_A&quot;,&quot;HCD0902343_V1_A&quot;,&quot;HCD0904650_V1_A&quot;,&quot;HCD0906250_V1_A&quot;,&quot;HCD0909256_V1_A&quot;,&quot;HCD0912952_V1_A&quot;,&quot;HCD0914956_V1_A&quot;,&quot;HCD0919562_V1_A&quot;,&quot;HCD0921145_V1_A&quot;,&quot;HCD0921347_V1_A&quot;,&quot;HCD0925759_V1_A&quot;,&quot;HCD0927056_V1_A&quot;,&quot;HCD0929161_V1_A&quot;,&quot;HCD0933051_V1_A&quot;,&quot;HCD0938263_V1_A&quot;,&quot;HCD0943458_V1_A&quot;,&quot;HCD0945967_V1_A&quot;,&quot;HCD0946868_V1_A&quot;,&quot;HCD0947365_V1_A&quot;,&quot;HCD0949874_V1_A&quot;,&quot;HCD0951861_V1_A&quot;,&quot;HCD0956871_V1_A&quot;,&quot;HCD0957368_V1_A&quot;,&quot;HCD0960155_V1_A&quot;,&quot;HCD0960458_V1_A&quot;,&quot;HCD0968878_V1_A&quot;,&quot;HCD0969072_V1_A&quot;,&quot;HCD0977576_V1_A&quot;,&quot;HCD0979378_V1_A&quot;,&quot;HCD0980262_V1_A&quot;,&quot;HCD0985474_V1_A&quot;,&quot;HCD0988682_V1_A&quot;,&quot;HCD0995477_V1_A&quot;,&quot;HCD0997380_V1_A&quot;,&quot;HCD1001916_V1_A&quot;,&quot;HCD1003617_V1_A&quot;,&quot;HCD1007221_V1_A&quot;,&quot;HCD1007423_V1_A&quot;,&quot;HCD1010311_V1_A&quot;,&quot;HCD1010412_V1_A&quot;,&quot;HCD1012719_V1_A&quot;,&quot;HCD1013014_V1_A&quot;,&quot;HCD1014723_V1_A&quot;,&quot;HCD1016929_V1_A&quot;,&quot;HCD1017729_V1_A&quot;,&quot;HCD1017931_V1_A&quot;,&quot;HCD1021821_V1_A&quot;,&quot;HCD1022722_V1_B&quot;,&quot;HCD1027126_V1_A&quot;,&quot;HCD1029837_V1_B&quot;,&quot;HCD1036733_V1_A&quot;,&quot;HCD1036834_V1_A&quot;,&quot;HCD1039032_V1_A&quot;,&quot;HCD1042223_V1_A&quot;,&quot;HCD1047233_V1_A&quot;,&quot;HCD1057337_V1_A&quot;,&quot;HCD1071634_V1_A&quot;,&quot;HCD1071836_V1_A&quot;,&quot;HCD1093139_V1_A&quot;,&quot;HCD1103419_V1_A&quot;,&quot;HCD1106728_V1_A&quot;,&quot;HCD1108833_V1_A&quot;,&quot;HCD1111822_V1_A&quot;,&quot;HCD1113220_V1_A&quot;,&quot;HCD1119030_V1_A&quot;,&quot;HCD1119232_V1_A&quot;,&quot;HCD1120015_V1_A&quot;,&quot;HCD1123526_V1_A&quot;,&quot;HCD1128738_V1_A&quot;,&quot;HCD1129235_V1_A&quot;,&quot;HCD1131222_V1_A&quot;,&quot;HCD1139541_V1_A&quot;,&quot;HCD1155943_V1_A&quot;,&quot;HCD1156036_V1_A&quot;,&quot;HCD1159446_V1_A&quot;,&quot;HCD1162334_V1_A&quot;,&quot;HCD1163134_V1_A&quot;,&quot;HCD1168245_V1_A&quot;,&quot;HCD1175343_V1_A&quot;,&quot;HCD1176345_V1_A&quot;,&quot;HCD1181843_V1_A&quot;,&quot;HCD1184950_V1_B&quot;,&quot;HCD1187653_V1_A&quot;,&quot;HCD1196553_V1_A&quot;,&quot;HCD1197757_V1_A&quot;,&quot;HCD1202320_V1_A&quot;,&quot;HCD1203928_V1_A&quot;,&quot;HCD1205326_V1_A&quot;,&quot;HCD1209536_V1_A&quot;,&quot;HCD1212929_V1_A&quot;,&quot;HCD1215632_V1_A&quot;,&quot;HCD1221627_V1_A&quot;,&quot;HCD1223833_V1_A&quot;,&quot;HCD1223934_V1_A&quot;,&quot;HCD1227134_V1_A&quot;,&quot;HCD1227740_V1_A&quot;,&quot;HCD1231832_V1_A&quot;,&quot;HCD1237844_V1_A&quot;,&quot;HCD1239343_V1_A&quot;,&quot;HCD1240530_V1_A&quot;,&quot;HCD1246340_V1_A&quot;,&quot;HCD1262136_V1_A&quot;,&quot;HCD1267348_V1_A&quot;,&quot;HCD1268350_V1_A&quot;,&quot;HCD1276753_V1_A&quot;,&quot;HCD1277149_V1_A&quot;,&quot;HCD1282142_V1_A&quot;,&quot;HCD1285956_V1_A&quot;,&quot;HCD1289358_V1_A&quot;,&quot;HCD1293349_V1_A&quot;,&quot;HCD1294755_V1_A&quot;,&quot;HCD1305936_V1_A&quot;,&quot;HCD1306130_V1_A&quot;,&quot;HCD1314331_V1_A&quot;,&quot;HCD1315737_V1_A&quot;,&quot;HCD1322835_V1_A&quot;,&quot;HCD1327744_V1_A&quot;,&quot;HCD1328241_V1_A&quot;,&quot;HCD1328948_V1_A&quot;,&quot;HCD1330228_V1_A&quot;,&quot;HCD1342033_V1_A&quot;,&quot;HCD1346849_V1_A&quot;,&quot;HCD1350638_V1_A&quot;,&quot;HCD1358149_V1_A&quot;,&quot;HCD1361441_V1_A&quot;,&quot;HCD1363546_V1_A&quot;,&quot;HCD1371848_V1_A&quot;,&quot;HCD1375755_V1_A&quot;,&quot;HCD1376252_V1_A&quot;,&quot;HCD1380849_V1_A&quot;,&quot;HCD1387055_V1_A&quot;,&quot;HCD1389665_V1_A&quot;,&quot;HCD1395458_V1_A&quot;,&quot;HCD1396662_V1_A&quot;,&quot;HCD1400728_V1_A&quot;,&quot;HCD1404231_V1_A&quot;,&quot;HCD1407439_V1_B&quot;,&quot;HCD1409342_V1_A&quot;,&quot;HCD1410933_V1_A&quot;,&quot;HCD1411531_V1_A&quot;,&quot;HCD1411632_V1_A&quot;,&quot;HCD1411935_V1_A&quot;,&quot;HCD1433743_V1_A&quot;,&quot;HCD1435646_V1_A&quot;,&quot;HCD1444142_V1_B&quot;,&quot;HCD1445245_V1_A&quot;,&quot;HCD1456048_V1_A&quot;,&quot;HCD1458153_V1_A&quot;,&quot;HCD1462548_V1_A&quot;,&quot;HCD1464451_V1_A&quot;,&quot;HCD1464653_V1_A&quot;,&quot;HCD1477056_V1_A&quot;,&quot;HCD1479262_V1_A&quot;,&quot;HCD1479969_V1_A&quot;,&quot;HCD1481855_V1_A&quot;,&quot;HCD1490048_V1_A&quot;,&quot;HCD1491252_V1_A&quot;,&quot;HCD1491454_V1_A&quot;,&quot;HCD1493761_V1_A&quot;,&quot;HCD1493862_V1_A&quot;,&quot;HCD1496767_V1_A&quot;,&quot;HCD1500025_V1_A&quot;,&quot;HCD1500631_V1_A&quot;,&quot;HCD1501936_V1_A&quot;,&quot;HCD1502635_V1_A&quot;,&quot;HCD1504437_V1_A&quot;,&quot;HCD1510432_V1_A&quot;,&quot;HCD1514945_V1_A&quot;,&quot;HCD1515644_V1_A&quot;,&quot;HCD1518448_V1_A&quot;,&quot;HCD1522338_V1_A&quot;,&quot;HCD1527045_V1_A&quot;,&quot;HCD1527651_V1_A&quot;,&quot;HCD1534244_V1_A&quot;,&quot;HCD1539759_V1_A&quot;,&quot;HCD1543851_V1_A&quot;,&quot;HCD1546857_V1_A&quot;,&quot;HCD1553551_V1_A&quot;,&quot;HCD1557054_V1_A&quot;,&quot;HCD1560851_V1_A&quot;,&quot;HCD1565356_V1_A&quot;,&quot;HCD1568867_V1_A&quot;,&quot;HCD1571351_V1_A&quot;,&quot;HCD1573456_V1_A&quot;,&quot;HCD1575359_V1_A&quot;,&quot;HCD1578365_V1_A&quot;,&quot;HCD1590860_V1_A&quot;,&quot;HCD1594767_V1_A&quot;,&quot;HCD1600332_V1_A&quot;,&quot;HCD1609148_V1_A&quot;,&quot;HCD1610436_V1_A&quot;,&quot;HCD1612238_V1_A&quot;,&quot;HCD1612844_V1_A&quot;,&quot;HCD1617450_V1_A&quot;,&quot;HCD1622342_V1_A&quot;,&quot;HCD1623142_V1_A&quot;,&quot;HCD1623445_V1_A&quot;,&quot;HCD1626653_V1_A&quot;,&quot;HCD1630139_V1_A&quot;,&quot;HCD1631646_V1_A&quot;,&quot;HCD1633751_V1_A&quot;,&quot;HCD1643855_V1_A&quot;,&quot;HCD1645354_V1_A&quot;,&quot;HCD1646154_V1_A&quot;,&quot;HCD1647863_V1_X&quot;,&quot;HCD1654355_V1_A&quot;,&quot;HCD1655458_V1_A&quot;,&quot;HCD1656359_V1_A&quot;,&quot;HCD1658565_V1_A&quot;,&quot;HCD1658969_V1_A&quot;,&quot;HCD1663053_V1_A&quot;,&quot;HCD1664358_V1_A&quot;,&quot;HCD1664762_V1_A&quot;,&quot;HCD1668164_V1_A&quot;,&quot;HCD1681257_V1_A&quot;,&quot;HCD1685164_V1_A&quot;,&quot;HCD1686267_V1_A&quot;,&quot;HCD1694569_V1_A&quot;,&quot;HCD1701338_V1_A&quot;,&quot;HCD1703140_V1_A&quot;,&quot;HCD1707047_V1_A&quot;,&quot;HCD1711240_V1_A&quot;,&quot;HCD1712444_V1_A&quot;,&quot;HCD1714751_V1_A&quot;,&quot;HCD1723651_V1_A&quot;,&quot;HCD1729562_V1_A&quot;,&quot;HCD1734858_V1_A&quot;,&quot;HCD1742958_V1_A&quot;,&quot;HCD1743354_V1_A&quot;,&quot;HCD1748061_V1_A&quot;,&quot;HCD1749467_V1_A&quot;,&quot;HCD1749770_V1_A&quot;,&quot;HCD1753559_V1_A&quot;,&quot;HCD1756060_V1_A&quot;,&quot;HCD1756262_V1_A&quot;,&quot;HCD1757062_V1_A&quot;,&quot;HCD1759571_V1_A&quot;,&quot;HCD1761356_V1_A&quot;,&quot;HCD1762661_V1_A&quot;,&quot;HCD1765970_V1_A&quot;,&quot;HCD1769978_V1_A&quot;,&quot;HCD1778070_V1_A&quot;,&quot;HCD1778474_V1_A&quot;,&quot;HCD1783366_V1_A&quot;,&quot;HCD1784065_V1_A&quot;,&quot;HCD1785572_V1_A&quot;,&quot;HCD1787677_V1_A&quot;,&quot;HCD1790262_V1_A&quot;,&quot;HCD1791163_V1_A&quot;,&quot;HCD1791567_V1_A&quot;,&quot;HCD1794977_V1_A&quot;,&quot;HCD1796577_V1_A&quot;,&quot;HCD1798985_V1_A&quot;,&quot;HCD1801140_V1_A&quot;,&quot;HCD1807051_V1_A&quot;,&quot;HCD1812044_V1_A&quot;,&quot;HCD1826661_V1_A&quot;,&quot;HCD1832858_V1_A&quot;,&quot;HCD1838567_V1_A&quot;,&quot;HCD1840251_V1_B&quot;,&quot;HCD1842558_V1_A&quot;,&quot;HCD1845160_V1_A&quot;,&quot;HCD1847972_V1_A&quot;,&quot;HCD1849673_V1_A&quot;,&quot;HCD1852056_V1_A&quot;,&quot;HCD1854767_V1_A&quot;,&quot;HCD1855365_V1_A&quot;,&quot;HCD1856468_V1_A&quot;,&quot;HCD1857066_V1_A&quot;,&quot;HCD1859474_V1_A&quot;,&quot;HCD1863465_V1_A&quot;,&quot;HCD1867372_V1_A&quot;,&quot;HCD1870159_V1_A&quot;,&quot;HCD1871969_V1_A&quot;,&quot;HCD1872971_V1_A&quot;,&quot;HCD1876878_V1_A&quot;,&quot;HCD1880162_V1_A&quot;,&quot;HCD1880465_V1_A&quot;,&quot;HCD1881164_V1_A&quot;,&quot;HCD1886275_V1_A&quot;,&quot;HCD1886477_V1_A&quot;,&quot;HCD1886881_V1_A&quot;,&quot;HCD1891268_V1_A&quot;,&quot;HCD1892371_V1_A&quot;,&quot;HCD1900142_V1_A&quot;,&quot;HCD1900445_V1_A&quot;,&quot;HCD1901346_V1_A&quot;,&quot;HCD1903350_V1_A&quot;,&quot;HCD1905152_V1_A&quot;,&quot;HCD1906457_V1_A&quot;,&quot;HCD1914557_V1_A&quot;,&quot;HCD1920754_V1_A&quot;,&quot;HCD1925461_V1_A&quot;,&quot;HCD1928871_V1_A&quot;,&quot;HCD1930353_V1_A&quot;,&quot;HCD1931456_V1_A&quot;,&quot;HCD1933864_V1_A&quot;,&quot;HCD1934159_V1_A&quot;,&quot;HCD1939068_V1_A&quot;,&quot;HCD1943867_V1_A&quot;,&quot;HCD1945164_V1_A&quot;,&quot;HCD1946469_V1_A&quot;,&quot;HCD1946873_V1_A&quot;,&quot;HCD1948170_V1_A&quot;,&quot;HCD1949879_V1_A&quot;,&quot;HCD1950056_V1_A&quot;,&quot;HCD1957171_V1_A&quot;,&quot;HCD1959680_V1_A&quot;,&quot;HCD1961263_V1_A&quot;,&quot;HCD1964269_V1_A&quot;,&quot;HCD1969986_V1_A&quot;,&quot;HCD1976377_V1_A&quot;,&quot;HCD1978987_V1_A&quot;,&quot;HCD1983879_V1_A&quot;,&quot;HCD1986784_V1_A&quot;,&quot;HCD1988687_V1_A&quot;,&quot;HCD1992375_V1_A&quot;,&quot;HCD1994884_V1_A&quot;,&quot;HCD1998791_V1_A&quot;,&quot;HCD2000111_V1_A&quot;,&quot;HCD2000212_V1_A&quot;,&quot;HCD2001517_V1_A&quot;,&quot;HCD2001719_V1_A&quot;,&quot;HCD2008329_V1_A&quot;,&quot;HCD2028638_V1_A&quot;,&quot;HCD2030726_V1_A&quot;,&quot;HCD2035635_V1_A&quot;,&quot;HCD2035837_V1_A&quot;,&quot;HCD2039946_V1_A&quot;,&quot;HCD2045638_V1_A&quot;,&quot;HCD2046842_V1_A&quot;,&quot;HCD2046943_V1_A&quot;,&quot;HCD2051532_V1_A&quot;,&quot;HCD2055237_V1_A&quot;,&quot;HCD2059245_V1_A&quot;,&quot;HCD2062537_V1_A&quot;,&quot;HCD2063034_V1_A&quot;,&quot;HCD2064440_V1_A&quot;,&quot;HCD2068145_V1_A&quot;,&quot;HCD2073340_V1_A&quot;,&quot;HCD2082442_V1_A&quot;,&quot;HCD2082947_V1_A&quot;,&quot;HCD2093245_V1_A&quot;,&quot;HCD2095148_V1_A&quot;,&quot;HCD2099257_V1_A&quot;,&quot;HCD2105125_V1_A&quot;,&quot;HCD2109234_V1_A&quot;,&quot;HCD2109638_V1_A&quot;,&quot;HCD2112829_V1_A&quot;,&quot;HCD2115835_V1_A&quot;,&quot;HCD2118538_V1_A&quot;,&quot;HCD2122125_V1_A&quot;,&quot;HCD2133433_V1_A&quot;,&quot;HCD2134031_V1_A&quot;,&quot;HCD2136540_V1_A&quot;,&quot;HCD2140026_V1_A&quot;,&quot;HCD2140127_V1_A&quot;,&quot;HCD2146139_V1_A&quot;,&quot;HCD2155140_V1_A&quot;,&quot;HCD2155645_V1_A&quot;,&quot;HCD2155746_V1_A&quot;,&quot;HCD2155847_V1_A&quot;,&quot;HCD2156142_V1_A&quot;,&quot;HCD2156344_V1_A&quot;,&quot;HCD2163644_V1_A&quot;,&quot;HCD2164242_V1_A&quot;,&quot;HCD2174649_V1_A&quot;,&quot;HCD2181848_V1_A&quot;,&quot;HCD2203933_V1_A&quot;,&quot;HCD2207840_V1_A&quot;,&quot;HCD2208135_V1_A&quot;,&quot;HCD2211932_V1_A&quot;,&quot;HCD2216437_V1_A&quot;,&quot;HCD2217742_V1_A&quot;,&quot;HCD2220428_V1_A&quot;,&quot;HCD2223131_V1_A&quot;,&quot;HCD2229547_V1_A&quot;,&quot;HCD2236140_V1_A&quot;,&quot;HCD2239247_V1_A&quot;,&quot;HCD2240030_V1_A&quot;,&quot;HCD2241234_V1_A&quot;,&quot;HCD2254243_V1_A&quot;,&quot;HCD2256651_V1_A&quot;,&quot;HCD2264549_V1_A&quot;,&quot;HCD2277558_V1_A&quot;,&quot;HCD2286155_V1_A&quot;,&quot;HCD2295762_V1_A&quot;,&quot;HCD2296461_V1_A&quot;,&quot;HCD2300426_V1_A&quot;,&quot;HCD2301428_V1_A&quot;,&quot;HCD2302430_V1_A&quot;,&quot;HCD2304737_V1_A&quot;,&quot;HCD2310227_V1_A&quot;,&quot;HCD2310328_V1_A&quot;,&quot;HCD2311633_V1_A&quot;,&quot;HCD2322335_V1_A&quot;,&quot;HCD2332136_V1_A&quot;,&quot;HCD2333340_V1_A&quot;,&quot;HCD2335344_V1_A&quot;,&quot;HCD2336346_V1_A&quot;,&quot;HCD2339049_V1_A&quot;,&quot;HCD2342745_V1_A&quot;,&quot;HCD2344244_V1_B&quot;,&quot;HCD2353245_V1_A&quot;,&quot;HCD2355249_V1_A&quot;,&quot;HCD2363450_V1_A&quot;,&quot;HCD2365454_V1_A&quot;,&quot;HCD2370952_V1_A&quot;,&quot;HCD2378463_V1_A&quot;,&quot;HCD2380753_V1_A&quot;,&quot;HCD2383456_V1_A&quot;,&quot;HCD2383658_V1_A&quot;,&quot;HCD2400026_V1_A&quot;,&quot;HCD2400632_V1_A&quot;,&quot;HCD2415140_V1_A&quot;,&quot;HCD2422440_V1_A&quot;,&quot;HCD2427753_V1_A&quot;,&quot;HCD2428755_V1_A&quot;,&quot;HCD2449763_V1_A&quot;,&quot;HCD2461450_V1_B&quot;,&quot;HCD2462654_V1_A&quot;,&quot;HCD2464759_V1_A&quot;,&quot;HCD2473356_V1_A&quot;,&quot;HCD2478669_V1_A&quot;,&quot;HCD2483561_V1_A&quot;,&quot;HCD2483662_V1_A&quot;,&quot;HCD2485666_V1_A&quot;,&quot;HCD2491257_V1_A&quot;,&quot;HCD2496570_V1_A&quot;,&quot;HCD2499374_V1_A&quot;,&quot;HCD2499576_V1_A&quot;,&quot;HCD2500030_V1_A&quot;,&quot;HCD2500939_V1_A&quot;,&quot;HCD2504038_V1_A&quot;,&quot;HCD2506951_V1_A&quot;,&quot;HCD2523345_V1_A&quot;,&quot;HCD2524751_V1_A&quot;,&quot;HCD2530140_V1_A&quot;,&quot;HCD2537457_V1_A&quot;,&quot;HCD2540042_V1_A&quot;,&quot;HCD2540648_V1_A&quot;,&quot;HCD2543250_V1_A&quot;,&quot;HCD2544151_V1_A&quot;,&quot;HCD2544757_V1_A&quot;,&quot;HCD2545759_V1_A&quot;,&quot;HCD2554255_V1_A&quot;,&quot;HCD2556158_V1_A&quot;,&quot;HCD2556764_V1_A&quot;,&quot;HCD2565664_V1_A&quot;,&quot;HCD2568670_V1_A&quot;,&quot;HCD2574564_V1_A&quot;,&quot;HCD2581763_V1_A&quot;,&quot;HCD2586268_V1_A&quot;,&quot;HCD2589981_V1_A&quot;,&quot;HCD2594671_V1_A&quot;,&quot;HCD2594772_V1_A&quot;,&quot;HCD2600034_V1_A&quot;,&quot;HCD2606652_V1_A&quot;,&quot;HCD2607452_V1_B&quot;,&quot;HCD2612142_V1_A&quot;,&quot;HCD2617657_V1_A&quot;,&quot;HCD2618053_V1_A&quot;,&quot;HCD2625454_V1_A&quot;,&quot;HCD2626456_V1_A&quot;,&quot;HCD2631954_V1_A&quot;,&quot;HCD2633554_V1_A&quot;,&quot;HCD2635659_V1_A&quot;,&quot;HCD2643052_V1_A&quot;,&quot;HCD2643456_V1_A&quot;,&quot;HCD2655766_V1_A&quot;,&quot;HCD2662763_V1_A&quot;,&quot;HCD2664161_V1_A&quot;,&quot;HCD2669575_V1_A&quot;,&quot;HCD2679073_V1_A&quot;,&quot;HCD2679982_V1_A&quot;,&quot;HCD2685169_V1_A&quot;,&quot;HCD2692671_V1_A&quot;,&quot;HCD2696780_V1_A&quot;,&quot;HCD2704551_V1_A&quot;,&quot;HCD2711649_V1_A&quot;,&quot;HCD2714655_V1_A&quot;,&quot;HCD2715152_V1_A&quot;,&quot;HCD2721147_V1_A&quot;,&quot;HCD2724456_V1_A&quot;,&quot;HCD2731049_V1_A&quot;,&quot;HCD2737869_V1_A&quot;,&quot;HCD2740454_V1_A&quot;,&quot;HCD2741961_V1_A&quot;,&quot;HCD2743157_V1_A&quot;,&quot;HCD2748268_V1_A&quot;,&quot;HCD2748672_V1_A&quot;,&quot;HCD2751560_V1_A&quot;,&quot;HCD2751964_V1_A&quot;,&quot;HCD2754061_V1_A&quot;,&quot;HCD2757370_V1_A&quot;,&quot;HCD2761967_V1_A&quot;,&quot;HCD2762565_V1_A&quot;,&quot;HCD2764771_V1_B&quot;,&quot;HCD2768981_V1_A&quot;,&quot;HCD2769983_V1_A&quot;,&quot;HCD2785678_V1_A&quot;,&quot;HCD2786074_V1_A&quot;,&quot;HCD2795479_V1_A&quot;,&quot;HCD2797584_V1_A&quot;,&quot;HCD2801852_V1_A&quot;,&quot;HCD2804151_V1_A&quot;,&quot;HCD2807460_V1_A&quot;,&quot;HCD2810954_V1_A&quot;,&quot;HCD2811552_V1_A&quot;,&quot;HCD2812352_V1_A&quot;,&quot;HCD2820351_V1_B&quot;,&quot;HCD2828569_V1_A&quot;,&quot;HCD2832863_V1_A&quot;,&quot;HCD2833360_V1_A&quot;,&quot;HCD2833461_V1_A&quot;,&quot;HCD2841965_V1_A&quot;,&quot;HCD2847977_V1_A&quot;,&quot;HCD2855875_V1_A&quot;,&quot;HCD2856170_V1_A&quot;,&quot;HCD2860262_V1_A&quot;,&quot;HCD2863975_V1_A&quot;,&quot;HCD2864270_V1_A&quot;,&quot;HCD2878382_V1_A&quot;,&quot;HCD2879788_V1_A&quot;,&quot;HCD2884175_V1_A&quot;,&quot;HCD2884377_V1_A&quot;,&quot;HCD2888789_V1_A&quot;,&quot;HCD2897184_V1_A&quot;,&quot;HCD2897891_V1_A&quot;,&quot;HCD2901654_V1_A&quot;,&quot;HCD2903759_V1_A&quot;,&quot;HCD2904862_V1_A&quot;,&quot;HCD2905460_V1_A&quot;,&quot;HCD2913459_V1_A&quot;,&quot;HCD2926973_V1_A&quot;,&quot;HCD2930055_V1_A&quot;,&quot;HCD2932665_V1_A&quot;,&quot;HCD2936875_V1_A&quot;,&quot;HCD2938172_V1_A&quot;,&quot;HCD2939275_V1_A&quot;,&quot;HCD2945876_V1_A&quot;,&quot;HCD2949682_V1_X&quot;,&quot;HCD2955374_V1_A&quot;,&quot;HCD2957075_V1_A&quot;,&quot;HCD2957277_V1_A&quot;,&quot;HCD2968080_V1_A&quot;,&quot;HCD2976079_V1_A&quot;,&quot;HCD2976382_V1_A&quot;,&quot;HCD2978386_V1_A&quot;,&quot;HCD2980575_V1_A&quot;,&quot;HCD2982276_V1_A&quot;,&quot;HCD2982579_V1_A&quot;,&quot;HCD2985181_V1_A&quot;,&quot;HCD2987185_V1_A&quot;,&quot;HCD2990073_V1_A&quot;,&quot;HCD2993079_V1_A&quot;,&quot;HCD2995083_V1_A&quot;,&quot;HCD2996590_V1_A&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons"],"caption":"<caption>Participants with CARIT task behavior, but no dowloaded task MRI (on this task).<\/caption>","data":[["HCD1106728","HCD2769983"],[14.07,12.15],["MALE","MALE"],["Harvard","University of Minnesota"],["WHITE","WHITE"],["HIGH","HIGH"],["HIGH","MIDDLE"],[200000,140000],["HCD1106728_V1_A","HCD2769983_V1_A"]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th>sID<\/th>\n      <th>age<\/th>\n      <th>gender<\/th>\n      <th>site<\/th>\n      <th>RACE<\/th>\n      <th>SES_PLVL<\/th>\n      <th>SES_RLVL<\/th>\n      <th>income<\/th>\n      <th>sessionID<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Bfrtip","buttons":["csv"],"columnDefs":[{"className":"dt-right","targets":[1,7]}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
<div id="public-release" class="section level2">
<h2>Public release</h2>
<pre class="r"><code>public_release[, PR := TRUE]
d_pr &lt;- public_release[d_combined, on = &#39;sID&#39;]
d_pr[, PR := data.table::fifelse(PR, TRUE, FALSE, na = FALSE)]
d_pr &lt;- d_pr[PR == TRUE]</code></pre>
<p>Not all staged participants are available for public release, and we've decided to use the public release data for this set of analyses.</p>
<p>Number of PR participants: 652</p>
<p>Number of PR participants with CARIT behavior: 652</p>
<p>Number of PR participants with CARIT task scan: 643</p>
</div>
</div>
<div id="check-design" class="section level1">
<h1>Check design</h1>
<div id="public-release-and-scan-data" class="section level2">
<h2>Public release and scan data</h2>
<pre class="r"><code>carit_pr_scan &lt;- carit[public_release, on = &#39;sID&#39;, nomatch = 0]
carit_pr_scan &lt;- staged_dlmri[carit_pr_scan, on = &#39;sID&#39;][has_carit == TRUE]</code></pre>
<p>CARIT has two rounds of 92 trials each, for a total of 184 trials per subject.</p>
<p>Modal number of trials: 184.</p>
<p>Number of participants without modal number: 21.</p>
<pre class="r"><code>#List participants without the modal number of trials
do.call(DT::datatable, 
        c(list(carit_pr_scan[, list(`N trials` = .N), by = &#39;sID&#39;][`N trials` != as.numeric(modal(`N trials`))],
               caption = &#39;Pariticipants without modal number of trials.&#39;), 
          dt_options))</code></pre>
<div id="htmlwidget-ca670490bd81829beb06" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-ca670490bd81829beb06">{"x":{"filter":"top","filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"disabled\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons"],"caption":"<caption>Pariticipants without modal number of trials.<\/caption>","data":[["HCD0295954","HCD0679770","HCD0714443","HCD0719352","HCD0921347","HCD0949874","HCD0957368","HCD0980262","HCD1022722","HCD1395458","HCD1444142","HCD1546857","HCD1658565","HCD1734858","HCD1798985","HCD1857066","HCD1945164","HCD2322335","HCD2600034","HCD2617657","HCD2635659"],[92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th>sID<\/th>\n      <th>N trials<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Bfrtip","buttons":["csv"],"columnDefs":[{"className":"dt-right","targets":1}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
<p>Each round of the task has 68 go trials and 24 nogo trials. Each subject should have 136 go and 48 nogo trials</p>
<p>Number of participants with any deviation from this:</p>
<pre class="r"><code>dcast(carit_pr_scan[, .N, keyby = c(&#39;sID&#39;, &#39;trialType&#39;)],
      sID ~ trialType)[go != 136 | nogo != 48][, .N]</code></pre>
<pre><code>## [1] 21</code></pre>
<p>Nogo trials should be equivalently distributed between prev reward and prev loss trials. Each subject should have 24 prevRew, 24 prevLoss.</p>
<p>Number of participants with any deviation from this:</p>
<pre class="r"><code>dcast(carit_pr_scan[, .N, keyby = c(&#39;sID&#39;, &#39;nogoCondition&#39;)], 
      sID ~ nogoCondition)[prevRewNogo != 24 | prevLossNogo != 24][, .N]</code></pre>
<pre><code>## [1] 21</code></pre>
<p>Go prepotency trials should number 20 for 2, 16 for 3, and 12 for 4.</p>
<p>Number of participants with any deviation from this:</p>
<pre class="r"><code>dcast(carit_pr_scan[, .N, keyby = c(&#39;sID&#39;, &#39;prepotency&#39;)], 
      sID ~ prepotency)[`2go` != 20 | 
                          `3go` != 16 |
                          `4go` != 12][, .N]</code></pre>
<pre><code>## [1] 21</code></pre>
<p>These are all the same IDs who are missing one of the two runs.</p>
<pre class="r"><code>identical(dcast(carit_pr_scan[, .N, keyby = c(&#39;sID&#39;, &#39;trialType&#39;)],
                sID ~ trialType)[go != 136 | nogo != 48][, &#39;sID&#39;],
          dcast(carit_pr_scan[, .N, keyby = c(&#39;sID&#39;, &#39;nogoCondition&#39;)], 
                sID ~ nogoCondition)[prevRewNogo != 24 | prevLossNogo != 24][, &#39;sID&#39;])</code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="r"><code>identical(dcast(carit_pr_scan[, .N, keyby = c(&#39;sID&#39;, &#39;nogoCondition&#39;)], 
                sID ~ nogoCondition)[prevRewNogo != 24 | prevLossNogo != 24][, &#39;sID&#39;], 
          dcast(carit_pr_scan[, .N, keyby = c(&#39;sID&#39;, &#39;prepotency&#39;)], 
                sID ~ prepotency)[`2go` != 20 | 
                                    `3go` != 16 |
                                    `4go` != 12][, &#39;sID&#39;])</code></pre>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="for-all-carit-data" class="section level2">
<h2>For all CARIT data</h2>
<p>CARIT has two rounds of 92 trials each, for a total of 184 trials per subject.</p>
<p>Modal number of trials: 184.</p>
<p>Number of participants without modal number: 151.</p>
<pre class="r"><code>#List participants without the modal number of trials
do.call(DT::datatable, 
        c(list(carit[, list(`N trials` = .N, data_source = unique(data_source)), by = &#39;sID&#39;][`N trials` != as.numeric(modal(`N trials`))],
               caption = &#39;Pariticipants without modal number of trials.&#39;), 
          dt_options))</code></pre>
<div id="htmlwidget-5f9d2cfa0f39fb16a2c8" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-5f9d2cfa0f39fb16a2c8">{"x":{"filter":"top","filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"6\" data-max=\"152\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons"],"caption":"<caption>Pariticipants without modal number of trials.<\/caption>","data":[["HCD0144125","HCD0295954","HCD0679770","HCD0714443","HCD0719352","HCD0921347","HCD0938263","HCD0949874","HCD0957368","HCD0980262","HCD1022722","HCD1036733","HCD1155943","HCD1395458","HCD1444142","HCD1527651","HCD1546857","HCD1645354","HCD1658565","HCD1734858","HCD1798985","HCD1857066","HCD1901346","HCD1945164","HCD2039946","HCD2322335","HCD2336346","HCD2464759","HCD2473356","HCD2499374","HCD2600034","HCD2617657","HCD2635659","HCD2643456","HCD2847977","HCD2980575","HCD0007014","HCD0030413","HCD0033419","HCD0056229","HCD0099752","HCD0117324","HCD0119126","HCD0155837","HCD0187850","HCD0306630","HCD0395251","HCD0454443","HCD0465246","HCD0481749","HCD0484452","HCD0507034","HCD0522434","HCD0663048","HCD0769973","HCD0807046","HCD0815247","HCD0832853","HCD0836356","HCD0856059","HCD0867973","HCD0869169","HCD0909761","HCD0924858","HCD0931249","HCD0982872","HCD0989280","HCD0997279","HCD1005621","HCD1017123","HCD1032927","HCD1043629","HCD1068746","HCD1104724","HCD1144534","HCD1194751","HCD1204627","HCD1218032","HCD1249649","HCD1257042","HCD1266952","HCD1314432","HCD1331432","HCD1333638","HCD1336341","HCD1410630","HCD1413939","HCD1423841","HCD1447249","HCD1452141","HCD1454246","HCD1461344","HCD1475355","HCD1515240","HCD1532745","HCD1551951","HCD1664661","HCD1714953","HCD1735052","HCD1742251","HCD1754056","HCD1756464","HCD1757668","HCD1780663","HCD1818561","HCD1821247","HCD1848469","HCD1872062","HCD1887277","HCD1905758","HCD1941964","HCD1984881","HCD1989285","HCD1998892","HCD2017330","HCD2044333","HCD2053536","HCD2082341","HCD2095754","HCD2103323","HCD2122428","HCD2149852","HCD2181545","HCD2208236","HCD2215536","HCD2225135","HCD2237041","HCD2242135","HCD2321535","HCD2363955","HCD2398267","HCD2425143","HCD2442042","HCD2449157","HCD2449460","HCD2491156","HCD2641351","HCD2648365","HCD2649670","HCD2734358","HCD2776374","HCD2781771","HCD2805658","HCD2834463","HCD2847371","HCD2858477","HCD2863268","HCD2892477","HCD2893277","HCD2932968","HCD2971776"],[92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,6,92,92,92,92,92,143,92,92,92,92,92,92,92,10,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,27,92,35,92,92,92,16,92,92,24,92,92,64,92,92,92,92,92,92,92,108,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,119,117,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,112,92,124,92,92,92,92,152,92,92,92,91,92,92,92,92,92,131],["staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","staged","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake","intake"]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th>sID<\/th>\n      <th>N trials<\/th>\n      <th>data_source<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Bfrtip","buttons":["csv"],"columnDefs":[{"className":"dt-right","targets":1}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
<p>Each round of the task has 68 go trials and 24 nogo trials. Each subject should have 136 go and 48 nogo trials</p>
<p>Number of participants with any deviation from this:</p>
<pre class="r"><code>dcast(carit[, .N, keyby = c(&#39;sID&#39;, &#39;trialType&#39;)],
      sID ~ trialType)[go != 136 | nogo != 48][, .N]</code></pre>
<pre><code>## [1] 151</code></pre>
<p>Nogo trials should be equivalently distributed between prev reward and prev loss trials. Each subject should have 24 prevRew, 24 prevLoss.</p>
<p>Number of participants with any deviation from this:</p>
<pre class="r"><code>dcast(carit[, .N, keyby = c(&#39;sID&#39;, &#39;nogoCondition&#39;)], 
      sID ~ nogoCondition)[prevRewNogo != 24 | prevLossNogo != 24][, .N]</code></pre>
<pre><code>## [1] 153</code></pre>
<p>Go prepotency trials should number 20 for 2, 16 for 3, and 12 for 4.</p>
<p>Number of participants with any deviation from this:</p>
<pre class="r"><code>dcast(carit[, .N, keyby = c(&#39;sID&#39;, &#39;prepotency&#39;)], 
      sID ~ prepotency)[`2go` != 20 | 
                          `3go` != 16 |
                          `4go` != 12][, .N]</code></pre>
<pre><code>## [1] 151</code></pre>
</div>
</div>
<div id="data-availability" class="section level1 tabset">
<h1>Data availability</h1>
<p>N participants with task behavior: 1178. N participants with any task fMRI: 814. N participants with CARIT fMRI: 807. N participants with Guessing fMRI: 813.</p>
<p>The following comparisons are based on the those with any CARIT task data whatsover, and those who have fMRI CARIT data.</p>
<div id="age" class="section level2">
<h2>Age</h2>
<pre class="r"><code>carit_behavior_ids &lt;- unique(carit[, c(&#39;sID&#39;)])
carit_behavior_ids[, carit_behav := TRUE]
demos_and_data_avail &lt;- merge(carit_behavior_ids, demos, on = &#39;sID&#39;, all = TRUE)
demos_and_data_avail &lt;- merge(demos_and_data_avail, staged_dlmri, on = &#39;sID&#39;, all = TRUE)
avail_type &lt;- function(behav, fmri){
  r &lt;- fifelse(fifelse(is.na(fmri), FALSE, fmri) &amp; 
                 fifelse(is.na(behav), FALSE, behav), &#39;CARIT fMRI&#39;, &#39;none&#39;)
  return(r)
}
demos_and_data_avail[, `Data Available` := avail_type(carit_behav, has_carit)]
ggplot(demos_and_data_avail, aes(x = age)) + 
  geom_histogram(aes(group = `Data Available`, fill = `Data Available`, color = `Data Available`, y = ..count..),
                 position = position_dodge(), 
                 alpha = .95,
                 binwidth = 1) +
  scale_x_continuous(breaks = 1:25) + 
  scale_fill_manual(aesthetics = c(&#39;fill&#39;, &#39;color&#39;), values = apal[c(1,5)]) + 
  jftheme</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-17-1.png" width="576" /></p>
</div>
<div id="age-prop." class="section level2">
<h2>Age Prop.</h2>
<pre class="r"><code>agerange &lt;- range(demos_and_data_avail$age, na.rm = TRUE)
breaks &lt;- c(seq(floor(agerange[[1]]), ceiling(agerange[[2]]), 2), ceiling(agerange[[2]]))
breaks &lt;- breaks[-(length(breaks) -1)]
values &lt;- paste0(&#39;(&#39;, breaks[-length(breaks)], &#39;-&#39;, breaks[-1],&#39;]&#39;)

demos_and_data_avail_age &lt;- demos_and_data_avail
demos_and_data_avail_age[, age_bin := cut(floor(age), breaks = breaks, include.lowest = TRUE)]
demos_and_data_avail_age_prop &lt;- 
  demos_and_data_avail_age[, .N, 
                           by = c(&#39;age_bin&#39;, &#39;Data Available&#39;)][, prop := N / sum(N), 
                                                                by = &#39;age_bin&#39;]
ggplot(demos_and_data_avail_age_prop, aes(x = age_bin)) + 
  geom_col(aes(group = `Data Available`, fill = `Data Available`, color = `Data Available`, y = prop),
           position = position_stack(), 
           alpha = .95,
           binwidth = 1) +
  scale_fill_manual(aesthetics = c(&#39;fill&#39;, &#39;color&#39;), values = apal[c(1,5)]) + 
  scale_x_discrete(na.translate = FALSE) + 
  labs(x = &#39;Age binned (years)&#39;, y = &#39;Proportion&#39;) + 
  jftheme + 
  theme(axis.text.x = element_text(size = 10))</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-18-1.png" width="576" /></p>
</div>
<div id="pr-age-prop." class="section level2">
<h2>PR Age Prop.</h2>
<pre class="r"><code>public_release[, `Data Available` := TRUE]
PR_data_avail &lt;- merge(public_release, demos, on = &#39;sID&#39;, all = TRUE)
PR_data_avail[is.na(`Data Available`), `Data Available` := FALSE] 
PR_data_avail[, `Data Available` := factor(`Data Available`, levels = c(TRUE, FALSE), labels = c(&#39;Yes&#39;, &#39;No&#39;))] 

agerange &lt;- range(PR_data_avail$age)
breaks &lt;- c(seq(floor(agerange[[1]]), ceiling(agerange[[2]]), 2), ceiling(agerange[[2]]))
breaks &lt;- breaks[-(length(breaks) -1)]
values &lt;- paste0(&#39;(&#39;, breaks[-length(breaks)], &#39;-&#39;, breaks[-1],&#39;]&#39;)

PR_data_avail_age &lt;- PR_data_avail
PR_data_avail_age[, age_bin := cut(floor(age), breaks = breaks, include.lowest = TRUE)]
PR_data_avail_age_prop &lt;- 
  PR_data_avail_age[, .N, 
                           by = c(&#39;age_bin&#39;, &#39;Data Available&#39;)][, prop := N / sum(N), 
                                                                by = &#39;age_bin&#39;]
ggplot(PR_data_avail_age_prop, aes(x = age_bin)) + 
  geom_col(aes(group = `Data Available`, fill = `Data Available`, color = `Data Available`, y = prop),
           position = position_stack(), 
           alpha = .95,
           binwidth = 1) +
  scale_fill_manual(aesthetics = c(&#39;fill&#39;, &#39;color&#39;), values = apal[c(1,5)]) + 
  labs(x = &#39;Age binned (years)&#39;, y = &#39;Proportion&#39;) + 
  jftheme + 
  theme(axis.text.x = element_text(size = 10))</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-19-1.png" width="576" /></p>
</div>
<div id="sex" class="section level2">
<h2>Sex</h2>
<pre class="r"><code>ggplot(demos_and_data_avail, aes(x = gender)) + 
  geom_bar(aes(group = `Data Available`, fill = `Data Available`, color = `Data Available`, y = ..count..),
                 position = position_stack(), 
                 width = 1, alpha = .95,
                 binwidth = 1) +
  scale_fill_manual(aesthetics = c(&#39;fill&#39;, &#39;color&#39;), values = apal[c(1,5)]) + 
  jftheme</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-20-1.png" width="576" /></p>
</div>
<div id="pr-sex" class="section level2">
<h2>PR Sex</h2>
<pre class="r"><code>ggplot(PR_data_avail, aes(x = gender)) + 
  geom_bar(aes(group = `Data Available`, fill = `Data Available`, color = `Data Available`, y = ..count..),
                 position = position_stack(), 
                 width = 1, alpha = .95,
                 binwidth = 1) +
  scale_fill_manual(aesthetics = c(&#39;fill&#39;, &#39;color&#39;), values = apal[c(1,5)]) + 
  jftheme</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-21-1.png" width="576" /></p>
</div>
<div id="site" class="section level2">
<h2>Site</h2>
<pre class="r"><code>ggplot(demos_and_data_avail, aes(x = site)) + 
  geom_bar(aes(group = `Data Available`, fill = `Data Available`, color = `Data Available`, y = ..count..),
           position = position_stack(), 
           width = 1, alpha = .95,
           binwidth = 1) +
  scale_fill_manual(aesthetics = c(&#39;fill&#39;, &#39;color&#39;), values = apal[c(1,5)]) + 
  jftheme + 
  theme(axis.text.x = element_text(angle = 360-20, hjust = 0))</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-22-1.png" width="576" /></p>
</div>
<div id="site-prop." class="section level2">
<h2>Site Prop.</h2>
<pre class="r"><code>demos_and_data_avail_site_prop &lt;- 
  demos_and_data_avail[, .N, 
                       by = c(&#39;site&#39;, &#39;Data Available&#39;)][, prop := N / sum(N), 
                                                             by = &#39;site&#39;]


ggplot(demos_and_data_avail_site_prop, aes(x = site)) + 
  geom_col(aes(group = `Data Available`, fill = `Data Available`, color = `Data Available`, y = prop),
           position = position_stack(), 
           alpha = .95,
           binwidth = 1) +
  scale_fill_manual(aesthetics = c(&#39;fill&#39;, &#39;color&#39;), values = apal[c(1,5)]) + 
  jftheme + 
  theme(axis.text.x = element_text(angle = 360-20, hjust = 0))</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-23-1.png" width="576" /></p>
</div>
<div id="pr-site-prop." class="section level2">
<h2>PR Site Prop.</h2>
<pre class="r"><code>PR_data_avail_site_prop &lt;- 
  PR_data_avail[, .N, 
                by = c(&#39;site&#39;, &#39;Data Available&#39;)][, prop := N / sum(N), 
                                                  by = &#39;site&#39;]

ggplot(PR_data_avail_site_prop, aes(x = site)) + 
  geom_col(aes(group = `Data Available`, fill = `Data Available`, color = `Data Available`, y = prop),
           position = position_stack(), 
           alpha = .95,
           binwidth = 1) +
  scale_fill_manual(aesthetics = c(&#39;fill&#39;, &#39;color&#39;), values = apal[c(1,5)]) + 
  jftheme + 
  theme(axis.text.x = element_text(angle = 360-20, hjust = 0))</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-24-1.png" width="576" /></p>
</div>
<div id="race-count" class="section level2">
<h2>Race Count</h2>
<pre class="r"><code>ggplot(demos_and_data_avail, aes(x = RACE)) + 
  geom_bar(aes(group = `Data Available`, fill = `Data Available`, color = `Data Available`),
           position = position_dodge(), 
           alpha = .95,
           binwidth = 1) +
  scale_fill_manual(aesthetics = c(&#39;fill&#39;, &#39;color&#39;), values = apal[c(1,5)]) + 
  jftheme + 
  theme(axis.text.x = element_text(angle = 360-20, hjust = 0))</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-25-1.png" width="576" /></p>
</div>
<div id="race-prop." class="section level2">
<h2>Race Prop.</h2>
<pre class="r"><code>demos_and_data_avail_race_prop &lt;- 
  demos_and_data_avail[, .N, 
                       by = c(&#39;RACE&#39;, &#39;Data Available&#39;)][, prop := N / sum(N), 
                                                             by = &#39;RACE&#39;]
ggplot(demos_and_data_avail_race_prop, aes(x = RACE)) + 
  geom_col(aes(group = `Data Available`, fill = `Data Available`, color = `Data Available`, y = prop),
           position = position_stack(), 
           alpha = .95,
           binwidth = 1) +
  scale_fill_manual(aesthetics = c(&#39;fill&#39;, &#39;color&#39;), values = apal[c(1,5)]) + 
  jftheme + 
  theme(axis.text.x = element_text(angle = 360-20, hjust = 0))</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-26-1.png" width="576" /></p>
</div>
<div id="pr-race-prop." class="section level2">
<h2>PR Race Prop.</h2>
<pre class="r"><code>PR_data_avail_race_prop &lt;- 
  PR_data_avail[, .N, 
                       by = c(&#39;RACE&#39;, &#39;Data Available&#39;)][, prop := N / sum(N), 
                                                             by = &#39;RACE&#39;]
ggplot(PR_data_avail_race_prop, aes(x = RACE)) + 
  geom_col(aes(group = `Data Available`, fill = `Data Available`, color = `Data Available`, y = prop),
           position = position_stack(), 
           alpha = .95,
           binwidth = 1) +
  scale_fill_manual(aesthetics = c(&#39;fill&#39;, &#39;color&#39;), values = apal[c(1,5)]) + 
  jftheme + 
  theme(axis.text.x = element_text(angle = 360-20, hjust = 0))</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-27-1.png" width="576" /></p>
</div>
<div id="ses-count" class="section level2">
<h2>SES Count</h2>
<pre class="r"><code>ggplot(demos_and_data_avail, aes(x = SES_RLVL)) + 
  geom_bar(aes(group = `Data Available`, fill = `Data Available`, color = `Data Available`),
           position = position_dodge(), 
           alpha = .95,
           binwidth = 1) +
  scale_fill_manual(aesthetics = c(&#39;fill&#39;, &#39;color&#39;), values = apal[c(1,5)]) + 
  jftheme + 
  theme(axis.text.x = element_text(angle = 360-20, hjust = 0))</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
</div>
<div id="ses-prop." class="section level2">
<h2>SES Prop.</h2>
<pre class="r"><code>demos_and_data_avail_ses_prop &lt;- 
  demos_and_data_avail[, .N, 
                       by = c(&#39;SES_RLVL&#39;, &#39;Data Available&#39;)][, prop := N / sum(N), 
                                                             by = &#39;SES_RLVL&#39;]


ggplot(demos_and_data_avail_ses_prop, aes(x = SES_RLVL)) + 
  geom_col(aes(group = `Data Available`, fill = `Data Available`, color = `Data Available`, y = prop),
           position = position_stack(), 
           alpha = .95,
           binwidth = 1) +
  scale_fill_manual(aesthetics = c(&#39;fill&#39;, &#39;color&#39;), values = apal[c(1,5)]) + 
  jftheme + 
  theme(axis.text.x = element_text(angle = 360-20, hjust = 0))</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-29-1.png" width="576" /></p>
</div>
<div id="pr-ses-prop." class="section level2">
<h2>PR SES Prop.</h2>
<pre class="r"><code>PR_data_avail_ses_prop &lt;- 
  PR_data_avail[, .N, 
                       by = c(&#39;SES_RLVL&#39;, &#39;Data Available&#39;)][, prop := N / sum(N), 
                                                             by = &#39;SES_RLVL&#39;]


ggplot(PR_data_avail_ses_prop, aes(x = SES_RLVL)) + 
  geom_col(aes(group = `Data Available`, fill = `Data Available`, color = `Data Available`, y = prop),
           position = position_stack(), 
           alpha = .95,
           binwidth = 1) +
  scale_fill_manual(aesthetics = c(&#39;fill&#39;, &#39;color&#39;), values = apal[c(1,5)]) + 
  jftheme + 
  theme(axis.text.x = element_text(angle = 360-20, hjust = 0))</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-30-1.png" width="576" /></p>
</div>
<div id="proportions-compared" class="section level2 tabset">
<h2>Proportions compared</h2>
<pre class="r"><code>get_proportions &lt;- function(adt, cols, id.vars, data_col, data_crit){
  SEp &lt;- function(p, n){
    sqrt( p * (1 - p) / n )
  }
  ci &lt;- Vectorize(function(p, se, interval, type, tol = .05){
    interval &lt;- c(0,1) + c(1,-1)*(1-interval)/2
    if(type == &#39;u&#39;){
      r &lt;- min(1-tol, p + qnorm(interval[[2]])*se)
    } else if (type == &#39;l&#39;){
      r &lt;- max(tol, p + qnorm(interval[[1]])*se)
    }
  }, vectorize.args = c(&#39;p&#39;, &#39;se&#39;))
  if(&#39;age&#39; %in% cols){
    agerange &lt;- range(adt$age, na.rm = TRUE)
    breaks &lt;- c(seq(floor(agerange[[1]]), ceiling(agerange[[2]]), 2), ceiling(agerange[[2]]))
    breaks &lt;- breaks[-(length(breaks) -1)]
    values &lt;- paste0(&#39;(&#39;, breaks[-length(breaks)], &#39;-&#39;, breaks[-1],&#39;]&#39;)
    
    adt[, age_bin := cut(floor(age), breaks = breaks, include.lowest = TRUE)]
    adt[, age_bin_order := as.numeric(age_bin)]
    cols[which(cols == &#39;age&#39;)] &lt;- &#39;age_bin&#39;
    id.vars &lt;- c(id.vars, &#39;age_bin_order&#39;)
  }
  adt_l &lt;- data.table::melt(adt[, c(..id.vars, ..cols)],
                            id.vars = id.vars)
  if(&#39;age_bin_order&#39; %in% id.vars){
    adt_l_p &lt;- adt_l[, .(N_with_data = sum(get(data_col) == data_crit), 
                         N = .N,
                         age_bin_order = unique(age_bin_order)), by = c(&#39;variable&#39;, &#39;value&#39;)]
  } else {
    adt_l_p &lt;- adt_l[, .(N_with_data = sum(get(data_col) == data_crit), N = .N), by = c(&#39;variable&#39;, &#39;value&#39;)]
  }
  adt_l_p[, c(&#39;p&#39;, &#39;se&#39;) := list(N_with_data/N, SEp(N_with_data/N, N)), by = c(&#39;variable&#39;, &#39;value&#39;)]
  adt_l_p[, c(&#39;l&#39;, &#39;u&#39;) := list(ci(p, se, .95, type = &#39;l&#39;), ci(p, se, .95, type = &#39;u&#39;))]
  return(adt_l_p)
}

cols &lt;- c(&#39;SES_RLVL&#39;, &#39;RACE&#39;, &#39;site&#39;, &#39;gender&#39;, &#39;age&#39;)
id.vars &lt;- c(&#39;sID&#39;, &#39;Data Available&#39;)

PR_data_avail_props &lt;- get_proportions(PR_data_avail, cols = cols, id.vars = id.vars, 
                                       data_col = &#39;Data Available&#39;,
                                       data_crit = &#39;Yes&#39;)
demos_and_data_avail_props &lt;- get_proportions(demos_and_data_avail, cols = cols, id.vars = id.vars,
                                              data_col = &#39;Data Available&#39;,
                                              data_crit = &#39;CARIT fMRI&#39;)

PR_data_avail_props[, data := &#39;Public Release&#39;]
demos_and_data_avail_props[, data := &#39;Staged&#39;]

prop_comparison &lt;- data.table::rbindlist(list(demos_and_data_avail_props, PR_data_avail_props))
prop_comparison[, data := factor(data, levels = c(&#39;Staged&#39;, &#39;Public Release&#39;))]</code></pre>
<pre class="r"><code>for(col in cols){
  cat(paste0(&#39;\n\n### &#39;, col, &#39;\n\n&#39;))
  if(col == &#39;age&#39;){
    col &lt;- &#39;age_bin&#39;
    d &lt;- prop_comparison[variable == col]
    d[, value := factor(value, levels = unique(value)[order(unique(age_bin_order))])]
  } else {
    d &lt;- prop_comparison[variable == col]
  }
  if(col %in% c(&#39;SES_RLVL&#39;, &#39;RACE&#39;, &#39;site&#39;)){
    axis_text &lt;- theme(axis.text.x = element_text(angle = 360-20, hjust = 0))
  } else if (col == &#39;age_bin&#39;){
    axis_text &lt;- theme(axis.text.x = element_text(angle = 0, hjust = .5, size = 10))
  } else {
    axis_text &lt;- theme(axis.text.x = element_text(angle = 0, hjust = .5))
  }
  print(ggplot(d, aes(x = value, y = p, group = data, color = data)) +
          geom_point(position = position_dodge(width = .25), alpha = 1, size = 2) + 
          geom_linerange(aes(ymin = l, ymax = u), position = position_dodge(width = .25)) + 
          scale_color_manual(breaks = c(&#39;Staged&#39;, &#39;Public Release&#39;), values = apal[c(1,5)]) + 
          jftheme + 
          axis_text + 
          coord_cartesian(y = c(0,1)) + 
          labs(x = col, y = &#39;Proportion with data&#39;, color = &#39;&#39;))
}</code></pre>
<div id="ses_rlvl" class="section level3">
<h3>SES_RLVL</h3>
<p><img src="carit_report_files/figure-html/unnamed-chunk-32-1.png" width="576" /></p>
</div>
<div id="race" class="section level3">
<h3>RACE</h3>
<p><img src="carit_report_files/figure-html/unnamed-chunk-32-2.png" width="576" /></p>
</div>
<div id="site-1" class="section level3">
<h3>site</h3>
<p><img src="carit_report_files/figure-html/unnamed-chunk-32-3.png" width="576" /></p>
</div>
<div id="gender" class="section level3">
<h3>gender</h3>
<p><img src="carit_report_files/figure-html/unnamed-chunk-32-4.png" width="576" /></p>
</div>
<div id="age-1" class="section level3">
<h3>age</h3>
<p><img src="carit_report_files/figure-html/unnamed-chunk-32-5.png" width="576" /></p>
</div>
</div>
</div>
<div id="reaction-times-rt" class="section level1">
<h1>Reaction times (RT)</h1>
<div id="general-characterization" class="section level2 tabset">
<h2>General Characterization</h2>
<p>Number of negative reaction times: 22</p>
<div id="rt-and-age" class="section level3">
<h3>RT and age</h3>
<pre class="r"><code>ggplot(carit[RT.shape &gt; 0]) +
  geom_hex(aes(x = age, y = RT.shape, color = ..count..), binwidth = c(.5, .03)) +
  scale_fill_gradient(low = apal[[1]], high = apal[[5]]) + 
  scale_color_gradient(low = apal[[1]], high = apal[[5]]) + 
  geom_line(aes(x = age, y = RT.shape), stat = &#39;smooth&#39;, method = &#39;gam&#39;, color = apal[[2]]) + 
  jftheme</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
</div>
<div id="table-of-rt-0" class="section level3">
<h3>Table of RT &lt; 0</h3>
<pre class="r"><code>do.call(DT::datatable, 
        c(list(carit[RT.shape &lt; 0, list(N = .N, rt = mean(RT.shape)), by = sID],
               caption = &#39;Negative reaction times&#39;), 
          dt_options))</code></pre>
<div id="htmlwidget-2a13e3cd1b502a85ce29" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-2a13e3cd1b502a85ce29">{"x":{"filter":"top","filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"1\" data-max=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"-17.7283470626\" data-max=\"-0.029506922000024\" data-scale=\"15\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons"],"caption":"<caption>Negative reaction times<\/caption>","data":[["HCD0039128","HCD0165234","HCD0508440","HCD1268350","HCD1328948","HCD1560851","HCD1568867","HCD1832858","HCD1886275","HCD2461450","HCD2473356","HCD2483662","HCD2556764","HCD2731049","HCD0924858","HCD1032927","HCD1099858","HCD1664661","HCD1903956","HCD1907055","HCD2773368","HCD2896283"],[1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[-0.0295069220000244,-7.859516143796,-3.33392310142,-7.379360914226,-5.0284588337,-7.279935836788,-5.43232703209,-4.52118802071,-4.92038798332,-2.2329750061,-6.98963499069,-0.439970016480001,-4.80446600914,-17.7283470626,-7.386790990826,-7.747964859013,-6.84974384308,-7.473325967788,-0.94804906845,-5.71196913719,-7.190612077709,-6.41867113113]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th>sID<\/th>\n      <th>N<\/th>\n      <th>rt<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Bfrtip","buttons":["csv"],"columnDefs":[{"className":"dt-right","targets":[1,2]}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="negative-rt-over-trials" class="section level3">
<h3>Negative RT over trials</h3>
<pre class="r"><code>neg_ids &lt;- unique(carit[RT.shape &lt; 0, &#39;sID&#39;])
ggplot(carit[sID %in% neg_ids$sID], 
       aes(x = trialNum,
           y = RT.shape)) + 
  geom_hline(yintercept = 0, color = apal[[5]]) + 
  geom_line(aes(group = sID), color = apal[[4]]) + 
  geom_point(color = apal[[1]], size = .25) + 
  facet_grid(sID~runN, scales = &#39;free&#39;) + 
  jftheme + 
  theme(strip.background = element_blank(),
        strip.text = element_blank(),
        panel.margin = unit(.15, &quot;lines&quot;))</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-35-1.png" width="672" /></p>
</div>
<div id="all-trials-rt-0" class="section level3">
<h3>All trials RT &gt; 0</h3>
<pre class="r"><code>ggplot(carit[RT.shape &gt; 0], aes(x = RT.shape)) + 
  stat_density(aes(group = sID), geom = &quot;line&quot;, color = apal[[1]], alpha = 0.1, position = &#39;identity&#39;) + 
  coord_cartesian(xlim = c(0, 1)) + 
  jftheme</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-36-1.png" width="672" /></p>
</div>
<div id="participants-with-rt-0" class="section level3">
<h3>Participants with RT &lt; 0</h3>
<pre class="r"><code>ggplot(carit[sID %in% carit[RT.shape &lt; 0, sID]], aes(x = RT.shape)) + 
  stat_bin(aes(group = sID), geom = &quot;bar&quot;, fill = apal[[1]], alpha = 1, position = &#39;dodge&#39;) + 
  scale_x_continuous(breaks = c(-15, -10, -5, 0, 1)) +
  geom_vline(xintercept = 1, color = apal[[5]]) +
  jftheme</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-37-1.png" width="672" /></p>
</div>
<div id="all-rt-by-participant" class="section level3 tabset">
<h3>All RT by participant</h3>
<pre class="r"><code>#A few participants have a single negative RT.
sid_groups &lt;- split(unique(carit$sID), 1:20)
for(i in 1:length(sid_groups)){
  agrp &lt;- sid_groups[[i]]
  cat(sprintf(&#39;\n\n#### Group %02d\n\n&#39;, i))
  print(ggplot(carit[RT.shape &gt; 0 &amp; sID %in% agrp], aes(x = RT.shape)) +
          geom_histogram(fill = apal[[1]]) +
          coord_cartesian(xlim = c(0, 1)) +
          facet_wrap(~sID, ncol = 5) +
          scale_y_continuous(breaks = c(0,30)) +
          scale_x_continuous(breaks = c(0, .5, 1)) +
          jftheme)
}</code></pre>
</div>
<div id="participants-with-rt-.2" class="section level3">
<h3>Participants with RT &lt; .2</h3>
<pre class="r"><code>dt_table(data = carit[RT.shape &lt; .2, list(`N &lt; .2` = .N), by = &#39;sID&#39;],
         caption = &#39;Participants with RT &lt; .2&#39;)</code></pre>
<div id="htmlwidget-e419d2bec2ef2f1051d8" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-e419d2bec2ef2f1051d8">{"x":{"filter":"top","filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"1\" data-max=\"41\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons"],"caption":"<caption>Participants with RT &lt; .2<\/caption>","data":[["HCD0039128","HCD0073431","HCD0122317","HCD0129937","HCD0145430","HCD0152932","HCD0165234","HCD0165941","HCD0178748","HCD0181838","HCD0185644","HCD0197348","HCD0259546","HCD0286650","HCD0304828","HCD0305628","HCD0363743","HCD0367448","HCD0410322","HCD0461844","HCD0508440","HCD0536142","HCD0551946","HCD0555146","HCD0580751","HCD0583555","HCD0605135","HCD0619247","HCD0643345","HCD0678970","HCD0697671","HCD0703943","HCD0762959","HCD0764256","HCD0802440","HCD0858467","HCD0889579","HCD0921145","HCD0921347","HCD0946868","HCD0947365","HCD1007423","HCD1119232","HCD1123526","HCD1129235","HCD1163134","HCD1196553","HCD1203928","HCD1215632","HCD1231832","HCD1268350","HCD1282142","HCD1328241","HCD1328948","HCD1410933","HCD1411531","HCD1464451","HCD1477056","HCD1500631","HCD1522338","HCD1560851","HCD1568867","HCD1609148","HCD1630139","HCD1655458","HCD1703140","HCD1714751","HCD1743354","HCD1757062","HCD1769978","HCD1791567","HCD1832858","HCD1847972","HCD1849673","HCD1855365","HCD1876878","HCD1886275","HCD1906457","HCD1928871","HCD1930353","HCD1931456","HCD1998791","HCD2000212","HCD2001517","HCD2039946","HCD2155645","HCD2164242","HCD2223131","HCD2229547","HCD2236140","HCD2240030","HCD2296461","HCD2301428","HCD2400632","HCD2415140","HCD2461450","HCD2473356","HCD2478669","HCD2483662","HCD2485666","HCD2540042","HCD2556764","HCD2586268","HCD2589981","HCD2626456","HCD2662763","HCD2669575","HCD2692671","HCD2704551","HCD2731049","HCD2804151","HCD2897891","HCD2957075","HCD2985181","HCD2995083","HCD0007014","HCD0056229","HCD0099752","HCD0155837","HCD0265844","HCD0278853","HCD0300820","HCD0323125","HCD0395251","HCD0465246","HCD0488965","HCD0522434","HCD0690758","HCD0731847","HCD0737657","HCD0792564","HCD0856059","HCD0882666","HCD0909761","HCD0924858","HCD0932554","HCD0989280","HCD1007827","HCD1012012","HCD1017123","HCD1032927","HCD1099858","HCD1113018","HCD1144534","HCD1182542","HCD1188756","HCD1194751","HCD1295050","HCD1423841","HCD1452141","HCD1452848","HCD1553349","HCD1570349","HCD1646760","HCD1664661","HCD1714953","HCD1735052","HCD1789681","HCD1821247","HCD1848469","HCD1903956","HCD1905758","HCD1907055","HCD1917664","HCD1989285","HCD2017330","HCD2031627","HCD2053536","HCD2098457","HCD2215536","HCD2274350","HCD2449460","HCD2478063","HCD2556865","HCD2562658","HCD2600539","HCD2614247","HCD2648365","HCD2773368","HCD2805658","HCD2834463","HCD2864169","HCD2879687","HCD2896283","HCD2908870","HCD2925971","HCD2932968","HCD2971776"],[1,1,1,3,1,1,1,2,1,1,1,2,3,1,3,4,3,2,1,1,2,1,5,1,13,2,5,8,1,2,4,4,1,1,1,1,2,2,1,1,4,2,4,6,1,1,1,4,1,10,3,2,1,2,1,1,6,1,1,1,1,9,1,1,1,1,6,1,1,2,1,5,1,2,5,2,2,1,2,3,3,2,3,6,3,1,1,1,1,1,1,1,1,1,1,8,6,1,2,1,2,41,2,7,2,1,1,1,1,1,1,4,1,1,1,7,2,9,1,4,2,1,3,3,1,1,1,1,2,1,3,2,2,1,1,5,26,1,2,4,2,2,10,2,3,1,7,1,1,3,1,1,1,1,1,7,7,1,1,1,3,1,1,14,1,7,1,1,2,2,2,4,1,1,1,1,6,2,4,2,1,5,21,2,5,12,2,1]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th>sID<\/th>\n      <th>N &lt; .2<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Bfrtip","buttons":["csv"],"columnDefs":[{"className":"dt-right","targets":1}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="rt-and-task-design" class="section level2 tabset">
<h2>RT and task design</h2>
<div id="rt-by-gonogo" class="section level3">
<h3>RT by go/nogo</h3>
<pre class="r"><code>library(lme4)
#conditional means
null_mod_rx &lt;- lmer(RT.shape ~ 1 + trialType + (1 + trialType | sID), data = carit[RT.shape &gt; 0])
conditional_means &lt;- data.frame(trialType = c(&#39;go&#39;, &#39;nogo&#39;), y = 0)
conditional_means$RT.shape &lt;- predict(null_mod_rx, newdata = conditional_means, re.form = NA)

ggplot(carit[RT.shape &gt; 0], aes(x = RT.shape)) + 
  geom_area(data = data.frame(RT.shape = c(0, .600, .601, .800), 
                              y = c(rep(1, 4)), 
                              region = factor(c(&#39;Pres.&#39;, &#39;Pres.&#39;, &#39;Fix.&#39;, &#39;Fix.&#39;), 
                                              levels = c(&#39;Pres.&#39;, &#39;Fix.&#39;))),
            aes(y = y, fill = region),
            alpha = .5) + 
  scale_fill_manual(values = c(apal[c(1,4)])) +
  stat_density(aes(y = ..ndensity..), geom = &#39;density&#39;, color = apal[[5]], fill = apal[[5]], alpha = .8, adjust = 1.25) + 
  geom_histogram(aes(y = ..ndensity..), fill = apal[[1]], alpha = 1, binwidth = .015) + 
  geom_vline(data = conditional_means, aes(xintercept = RT.shape), color = apal[[4]]) + 
  geom_point(data = conditional_means, aes(x = RT.shape, y = y), color = apal[[4]], size = 2) + 
    geom_point(data = conditional_means, aes(x = RT.shape, y = y), color = apal[[2]], size = .5) + 
  coord_cartesian(xlim = c(0, 1)) + 
  facet_grid(trialType ~ ., scales = &#39;free_y&#39;) +
  jftheme</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-40-1.png" width="672" /></p>
</div>
<div id="all-go-rt-by-participant" class="section level3 tabset">
<h3>All go RT by participant</h3>
<pre class="r"><code>#A few participants have a single negative RT.
sid_groups &lt;- split(unique(carit$sID), 1:20)
for(i in 1:length(sid_groups)){
  agrp &lt;- sid_groups[[i]]
  cat(sprintf(&#39;\n\n#### Group %02d\n\n&#39;, i))
  print(ggplot(carit[RT.shape &gt; 0 &amp; trialType == &#39;go&#39; &amp; sID %in% agrp], aes(x = RT.shape)) + 
          geom_histogram(fill = apal[[1]]) + 
          coord_cartesian(xlim = c(0, 1)) + 
          facet_wrap(~sID, ncol = 5) +
          scale_y_continuous(breaks = c(0,15)) + 
          scale_x_continuous(breaks = c(0, .5, 1)) + 
          jftheme)
}</code></pre>
</div>
<div id="all-nogo-rt-by-participant" class="section level3 tabset">
<h3>All nogo RT by participant</h3>
<pre class="r"><code>#A few participants have a single negative RT.
sid_groups &lt;- split(unique(carit$sID), 1:20)
for(i in 1:length(sid_groups)){
  agrp &lt;- sid_groups[[i]]
  cat(sprintf(&#39;\n\n#### Group %02d\n\n&#39;, i))
  print(ggplot(carit[RT.shape &gt; 0 &amp; trialType == &#39;nogo&#39; &amp; sID %in% agrp], aes(x = RT.shape)) + 
          geom_histogram(fill = apal[[1]]) + 
          coord_cartesian(xlim = c(0, 1)) + 
          facet_wrap(~sID, ncol = 5) +
          scale_y_continuous(breaks = c(0,15)) + 
          scale_x_continuous(breaks = c(0, .5, 1)) + 
          jftheme)
}</code></pre>
</div>
<div id="late-presses" class="section level3">
<h3>Late Presses</h3>
<pre class="r"><code>carit[, isiPress.rt_num := as.character(isiPress.rt)]
carit[, isiPress.rt_num := gsub(&#39;\\[([0-9\\.]+)*,*.*\\]&#39;, &#39;\\1&#39;, isiPress.rt_num)] #sometimes there are more than one, e.g., [.23, .45]
carit[, isiPress.rt_num := as.numeric(isiPress.rt_num)]
carit[, lateTime := isiPress.rt_num - 0.2]</code></pre>
<p>Late presses here are just instances where there was no previous press. For &quot;go&quot; trials, these would count as misses, and for &quot;nogo&quot; trials, this would be correct-rejection trials.</p>
<p>Number of late presses: 4812.</p>
<p>Number of participants with late presses: 839.</p>
<p>Distribution of timing of late presses shows similarity across age bins.</p>
<pre class="r"><code>age_dens &lt;- carit[!is.na(isiPress.rt_num) &amp; corrRespTrialType %in% c(&#39;Miss&#39;,&#39;corReject&#39;),]
age_dens[, age_group := factor(((floor(age) - 5) %/% 6) * 6 + 5,
                               levels = c(5, 11, 17),
                               labels = c(&#39;5-10&#39;, &#39;11-16&#39;,&#39;17-22&#39;))]

ggplot(age_dens,
       aes(x = lateTime)) +
  geom_density(aes(fill = age_group, 
                   color = age_group, 
                   group = age_group), 
               alpha = .1, size = 1,
               position = position_identity(),
               adjust = 3) +
  scale_color_manual(breaks = c(&#39;5-10&#39;, &#39;11-16&#39;,&#39;17-22&#39;), 
                     values = apal[rev(c(2,1,5))],
                     aesthetics = c(&#39;color&#39;, &#39;fill&#39;),
                     name = &#39;Age group&#39;) +
  jftheme + 
  labs(x = &#39;Late press: time since trial end (seconds)&#39;)</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-44-1.png" width="672" /></p>
</div>
<div id="late-presses-by-age" class="section level3">
<h3>Late presses by age</h3>
<p>Unsurprisingly, younger participants made more late presses.</p>
<pre class="r"><code>late_press_age &lt;- carit[!is.na(isiPress.rt_num) &amp; corrRespTrialType %in% c(&#39;Miss&#39;,&#39;corReject&#39;), list(n = .N, age = unique(age)), by = &#39;sID&#39;]

ggplot(late_press_age, aes(x = age, y = n)) + 
  geom_hex(aes(fill = ..count.., color = ..count..), binwidth = c(1, 3)) + 
  scale_fill_gradient(low = apal[[1]], high = apal[[5]]) + 
  scale_color_gradient(low = apal[[1]], high = apal[[5]]) +
  geom_line(stat = &#39;smooth&#39;, method = &#39;gam&#39;, color = apal[[2]], size = .5, alpha = 1) +
  jftheme + 
  labs(x = &#39;Age (years)&#39;, y = &#39;Number of trials with late presses&#39;) + 
  theme(legend.margin = margin(rep(14, 4), &quot;pt&quot;),
        plot.margin = margin(rep(14, 4), &quot;pt&quot;), 
        legend.box.margin = margin(rep(14, 4), &quot;pt&quot;))</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-45-1.png" width="672" /></p>
</div>
</div>
<div id="rt-changes" class="section level2">
<h2>RT changes</h2>
<p>Reaction times should change depending on the event. A &quot;Go&quot; after a previous &quot;Go&quot; should be faster, and slower after a &quot;No-Go.&quot; This may differ depending on whether a &quot;No-Go&quot; resulted in a correct rejection or not.</p>
<pre class="r"><code>num_fac &lt;- function(x, levels = NULL){
  if(is.null(levels)){
    as.numeric(factor(x))  
  } else { 
    as.numeric(factor(x, levels = levels))
  }
}
lag1_num_fac_diff &lt;- function(x, levels = NULL){
  y &lt;- abs(num_fac(x, levels = levels) - num_fac(shift(x, fill = x[[1]], type = &#39;lag&#39;), levels = levels))
  return(y)
}

setorder(carit, sID, runN, trialNum)
carit[, trial_type_diff := lag1_num_fac_diff(trialType, levels = c(&#39;go&#39;, &#39;nogo&#39;)), by = c(&#39;sID&#39;, &#39;runN&#39;)]
carit[, chunkID := cumsum(trial_type_diff)]
carit[, N_of_trialType := 1:.N, by = c(&#39;sID&#39;, &#39;runN&#39;, &#39;chunkID&#39;)]
carit[, prev_trial := shift(trialType, type = &#39;lag&#39;)]</code></pre>
<pre class="r"><code>ggplot(carit[trialType == &#39;go&#39; &amp; RT.shape &gt; 0], aes(x = N_of_trialType, y = RT.shape)) + 
  geom_bin2d(aes(fill = ..count.., color = ..count..), binwidth = c(1, .025)) + 
  scale_fill_gradient(low = apal[[1]], high = apal[[5]]) + 
  scale_color_gradient(low = apal[[1]], high = apal[[5]]) +
  # geom_line(stat = &#39;smooth&#39;, method = &#39;gam&#39;, formula = y ~ s(x, k = 8), color = apal[[2]], size = .5, alpha = 1) +
  geom_smooth(method = &#39;gam&#39;, formula = y ~ s(x, k = 4), color = apal[[2]], alpha = .8) +
  jftheme + 
  labs(x = &#39;Number of previous &quot;Go&quot; trials&#39;, y = &#39;Reaction time&#39;) + 
  theme(legend.margin = margin(rep(14, 4), &quot;pt&quot;),
        plot.margin = margin(rep(14, 4), &quot;pt&quot;), 
        legend.box.margin = margin(rep(14, 4), &quot;pt&quot;))</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-47-1.png" width="456" /></p>
<pre class="r"><code>ggplot(carit[trialType == &#39;go&#39; &amp; RT.shape &gt; 0], aes(x = trialNum, y = RT.shape)) + 
  geom_bin2d(aes(fill = ..count.., color = ..count..), binwidth = c(5, .025)) + 
  scale_fill_gradient(low = apal[[1]], high = apal[[5]]) + 
  scale_color_gradient(low = apal[[1]], high = apal[[5]]) +
  # geom_line(stat = &#39;smooth&#39;, method = &#39;gam&#39;, formula = y ~ s(x, k = 8), color = apal[[2]], size = .5, alpha = 1) +
  geom_smooth(method = &#39;gam&#39;, formula = y ~ s(x, k = 4), color = apal[[2]], alpha = .8) +
  facet_wrap(~sprintf(&#39;Run %d&#39;, runN), ncol = 2) + 
  jftheme + 
  labs(x = &#39;Trial Number&#39;, y = &#39;Reaction time&#39;) + 
  theme(legend.margin = margin(rep(14, 4), &quot;pt&quot;),
        plot.margin = margin(rep(14, 4), &quot;pt&quot;), 
        legend.box.margin = margin(rep(14, 4), &quot;pt&quot;))</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-48-1.png" width="576" /></p>
<pre class="r"><code>library(lme4)

N_of_trialType_s &lt;- scale(carit$N_of_trialType)
RT.shape_s &lt;- scale(carit$RT.shape)
RT.m &lt;- attr(RT.shape_s, &#39;scaled:center&#39;)
RT.sd &lt;- attr(RT.shape_s, &#39;scaled:scale&#39;)
trialNum_s &lt;- scale(carit$trialNum)
runN_fac &lt;- factor(carit$runN)
N_of_trialType_fac &lt;- factor(carit$N_of_trialType, levels = c(&#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;))

carit_rt_frame &lt;- data.table(RT.shape = carit$RT.shape, 
                             RT.shape_s = as.numeric(RT.shape_s),
                             N_of_trialType_s = as.numeric(N_of_trialType_s),
                             N_of_trialType = carit$N_of_trialType,
                             trialNum_s = as.numeric(trialNum_s),
                             trialNum = carit$trialNum,
                             runN_fac = runN_fac,
                             runN = carit$runN,
                             sID = carit$sID,
                             trialType = carit$trialType,
                             N_of_trialType_fac = N_of_trialType_fac)

rt_repeated_go_trialnum_fit &lt;- lmer(
  RT.shape_s ~ 1 + N_of_trialType_s*trialNum_s*runN_fac + (1 + runN_fac | sID), 
  data = carit_rt_frame[trialType == &#39;go&#39; &amp; RT.shape &gt; 0], REML = FALSE)
summary(rt_repeated_go_trialnum_fit)</code></pre>
<pre><code>## Linear mixed model fit by maximum likelihood  [&#39;lmerMod&#39;]
## Formula: RT.shape_s ~ 1 + N_of_trialType_s * trialNum_s * runN_fac + (1 +  
##     runN_fac | sID)
##    Data: carit_rt_frame[trialType == &quot;go&quot; &amp; RT.shape &gt; 0]
## 
##       AIC       BIC    logLik  deviance  df.resid 
##  286028.1  286146.2 -143002.1  286004.1    138603 
## 
## Scaled residuals: 
##     Min      1Q  Median      3Q     Max 
## -6.7679 -0.6476 -0.0839  0.5603  5.5775 
## 
## Random effects:
##  Groups   Name        Variance Std.Dev. Corr 
##  sID      (Intercept) 0.14668  0.3830        
##           runN_fac2   0.01978  0.1406   -0.17
##  Residual             0.44412  0.6664        
## Number of obs: 138615, groups:  sID, 1171
## 
## Fixed effects:
##                                        Estimate Std. Error t value
## (Intercept)                            0.094204   0.011503   8.189
## N_of_trialType_s                       0.059854   0.002447  24.455
## trialNum_s                            -0.024403   0.002552  -9.562
## runN_fac2                             -0.075922   0.005825 -13.033
## N_of_trialType_s:trialNum_s            0.010500   0.002709   3.876
## N_of_trialType_s:runN_fac2             0.002221   0.003553   0.625
## trialNum_s:runN_fac2                   0.094711   0.003736  25.349
## N_of_trialType_s:trialNum_s:runN_fac2 -0.010983   0.003711  -2.960
## 
## Correlation of Fixed Effects:
##             (Intr) N_f_T_ trlNm_ rnN_f2 N_f_T_:N_ N__T_:N_2 tN_:N_
## N_f_trlTyp_ -0.059                                                
## trialNum_s   0.014 -0.066                                         
## runN_fac2   -0.213  0.117 -0.023                                  
## N_f_trT_:N_ -0.013 -0.126 -0.178  0.026                           
## N_f_tT_:N_2  0.041 -0.689  0.046 -0.171  0.087                    
## trlNm_s:N_2 -0.009  0.045 -0.683  0.039  0.122    -0.070          
## N__T_:N_:N_  0.009  0.092  0.130 -0.042 -0.730    -0.080    -0.225</code></pre>
<pre class="r"><code>#It didn&#39;t converge so restart and run for more iterations
#ss &lt;- getME(rt_repeated_go_trialnum_fit,c(&quot;theta&quot;,&quot;fixef&quot;))
#m2 &lt;- update(rt_repeated_go_trialnum_fit,start=ss,control=lmerControl(optCtrl=list(maxfun=2e4)))
#summary(m2)

rt_repeated_go_trialnum_fac_fit &lt;- lmer(
  RT.shape_s ~ 1 + N_of_trialType_fac*trialNum_s*runN_fac + (1 + runN_fac | sID), 
  data = carit_rt_frame[trialType == &#39;go&#39; &amp; RT.shape &gt; 0], REML = FALSE)
summary(rt_repeated_go_trialnum_fac_fit)</code></pre>
<pre><code>## Linear mixed model fit by maximum likelihood  [&#39;lmerMod&#39;]
## Formula: RT.shape_s ~ 1 + N_of_trialType_fac * trialNum_s * runN_fac +  
##     (1 + runN_fac | sID)
##    Data: carit_rt_frame[trialType == &quot;go&quot; &amp; RT.shape &gt; 0]
## 
##       AIC       BIC    logLik  deviance  df.resid 
##  285622.2  285819.0 -142791.1  285582.2    138595 
## 
## Scaled residuals: 
##     Min      1Q  Median      3Q     Max 
## -6.7200 -0.6470 -0.0825  0.5584  5.5927 
## 
## Random effects:
##  Groups   Name        Variance Std.Dev. Corr 
##  sID      (Intercept) 0.14673  0.3831        
##           runN_fac2   0.01983  0.1408   -0.17
##  Residual             0.44274  0.6654        
## Number of obs: 138615, groups:  sID, 1171
## 
## Fixed effects:
##                                            Estimate Std. Error t value
## (Intercept)                               0.0247378  0.0119605   2.068
## N_of_trialType_fac2                       0.1202651  0.0058606  20.521
## N_of_trialType_fac3                       0.1331446  0.0068125  19.544
## N_of_trialType_fac4                       0.1898688  0.0103756  18.300
## trialNum_s                               -0.0425302  0.0041030 -10.366
## runN_fac2                                -0.0798981  0.0075247 -10.618
## N_of_trialType_fac2:trialNum_s            0.0370030  0.0057587   6.426
## N_of_trialType_fac3:trialNum_s            0.0233871  0.0069551   3.363
## N_of_trialType_fac4:trialNum_s            0.0442454  0.0133743   3.308
## N_of_trialType_fac2:runN_fac2             0.0129031  0.0085542   1.508
## N_of_trialType_fac3:runN_fac2            -0.0006289  0.0099562  -0.063
## N_of_trialType_fac4:runN_fac2             0.0152958  0.0143574   1.065
## trialNum_s:runN_fac2                      0.1034181  0.0060239  17.168
## N_of_trialType_fac2:trialNum_s:runN_fac2  0.0013260  0.0084765   0.156
## N_of_trialType_fac3:trialNum_s:runN_fac2 -0.0660414  0.0101721  -6.492
## N_of_trialType_fac4:trialNum_s:runN_fac2  0.0056287  0.0163898   0.343</code></pre>
<pre class="r"><code>AIC(rt_repeated_go_trialnum_fac_fit, rt_repeated_go_trialnum_fit)</code></pre>
<pre><code>##                                 df      AIC
## rt_repeated_go_trialnum_fac_fit 20 285622.2
## rt_repeated_go_trialnum_fit     12 286028.1</code></pre>
<pre class="r"><code>new_frame &lt;- unique(carit_rt_frame[, c(&#39;N_of_trialType_s&#39;, &#39;trialNum_s&#39;, &#39;runN_fac&#39;,
                                       &#39;N_of_trialType&#39;, &#39;trialNum&#39;, &#39;runN&#39;)])

new_frame[, RT.shape_s := predict(rt_repeated_go_trialnum_fit, newdata = new_frame, re.form = ~0)]
new_frame[, RT.shape := RT.shape_s * RT.sd + RT.m]

new_frame_fac &lt;- unique(carit_rt_frame[, c(&#39;N_of_trialType_fac&#39;, &#39;trialNum_s&#39;, &#39;runN_fac&#39;,
                                           &#39;N_of_trialType&#39;, &#39;trialNum&#39;, &#39;runN&#39;)])
new_frame_fac[, RT.shape_s := predict(rt_repeated_go_trialnum_fac_fit, newdata = new_frame_fac, re.form = ~0)]
new_frame_fac[, RT.shape := RT.shape_s * RT.sd + RT.m]</code></pre>
<div id="n-previous-go-and-rt-plots" class="section level3 tabset">
<h3>N Previous &quot;GO&quot; and RT plots</h3>
<div id="continuous" class="section level4">
<h4>Continuous</h4>
<p>Number of previous go trials is a continuous variable. This model fits less well than when this variable is a factor.</p>
<pre class="r"><code>ggplot(new_frame, aes(x = trialNum, y = RT.shape)) + 
  geom_point(aes(color = N_of_trialType)) + 
  geom_line(aes(group = N_of_trialType, color = N_of_trialType)) + 
  scale_color_gradient(low = apal[[4]], high = apal[[2]], name = &#39;N previous\n&quot;go&quot; trials&#39;) + 
  facet_wrap(~sprintf(&#39;Run %d&#39;, runN), ncol = 2) + 
  jftheme</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-50-1.png" width="768" /></p>
</div>
<div id="factor" class="section level4">
<h4>Factor</h4>
<p>Number of previous go trials is a factor. This model fits best..</p>
<pre class="r"><code>ggplot(new_frame_fac, aes(x = trialNum, y = RT.shape)) + 
  geom_point(aes(color = N_of_trialType)) + 
  geom_line(aes(group = N_of_trialType, color = N_of_trialType)) + 
  scale_color_gradient(low = apal[[4]], high = apal[[2]], name = &#39;N previous\n&quot;go&quot; trials&#39;) + 
  facet_wrap(~sprintf(&#39;Run %d&#39;, runN), ncol = 2) + 
  jftheme</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-51-1.png" width="768" /></p>
</div>
</div>
<div id="rt-previous-go-versus-no-go" class="section level3">
<h3>RT Previous Go versus No-Go</h3>
<pre class="r"><code>rt_means &lt;- carit[trialType == &#39;go&#39; &amp; 
                    RT.shape &gt; 0 &amp; 
                    !is.na(prev_trial)][, .(mean = mean(RT.shape, na.rm = TRUE)),
                                        by = prev_trial]
ggplot(carit[trialType == &#39;go&#39; &amp; RT.shape &gt; 0 &amp; !is.na(prev_trial)], aes(x = RT.shape)) + 
  geom_density(aes(group = prev_trial, fill = prev_trial, color = prev_trial, y = ..density..), 
                 position = position_identity(), alpha = .8) + 
  geom_segment(data = rt_means, aes(x = mean, xend = mean, y = 0, yend = .25, color = prev_trial)) + 
  geom_point(data = rt_means, aes(x = mean, y = 0, color = prev_trial)) + 
  scale_fill_manual(breaks = c(&#39;go&#39;, &#39;nogo&#39;), values = apal[c(5,1)], 
                    name = &#39;Previous trial&#39;) + 
  scale_color_manual(breaks = c(&#39;go&#39;, &#39;nogo&#39;), values = apal[c(2,4)], 
                    name = &#39;Previous trial&#39;) + 
  jftheme + 
  labs(x = &#39;Reaction time&#39;, y = &#39;&#39;)</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-52-1.png" width="672" /></p>
</div>
</div>
<div id="probability-of-fa" class="section level2">
<h2>Probability of FA</h2>
<p>Is a FA more likely after more previous &quot;go&quot; trials?</p>
<pre class="r"><code>carit[, is_FA := corrRespTrialType == &#39;falseAlarm&#39;]

carit_FA_frame &lt;- data.table(is_FA = carit$is_FA, 
                             trialNum = carit$trialNum,
                             runN_fac = runN_fac,
                             runN = carit$runN,
                             sID = carit$sID,
                             trialType = carit$trialType,
                             prepotency = carit$prepotency,
                             age = carit$age)

carit_FA_frame &lt;- carit_FA_frame[trialType == &#39;nogo&#39;]
carit_FA_frame[, trialNum := 1:.N, by = c(&#39;sID&#39;, &#39;runN&#39;)]
carit_FA_frame[, trialNum_s := scale(trialNum)]

acc_mod &lt;- glmer(is_FA ~ 1 + prepotency + (1 | sID),
                data = carit_FA_frame, family = &#39;binomial&#39;)
summary(acc_mod)</code></pre>
<pre><code>## Generalized linear mixed model fit by maximum likelihood (Laplace
##   Approximation) [glmerMod]
##  Family: binomial  ( logit )
## Formula: is_FA ~ 1 + prepotency + (1 | sID)
##    Data: carit_FA_frame
## 
##      AIC      BIC   logLik deviance df.resid 
##  62969.9  63005.4 -31481.0  62961.9    52859 
## 
## Scaled residuals: 
##     Min      1Q  Median      3Q     Max 
## -2.6152 -0.6938 -0.4650  0.9411  3.6734 
## 
## Random effects:
##  Groups Name        Variance Std.Dev.
##  sID    (Intercept) 0.7547   0.8687  
## Number of obs: 52863, groups:  sID, 1178
## 
## Fixed effects:
##                Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)   -0.781795   0.029806 -26.229  &lt; 2e-16 ***
## prepotency3go  0.092459   0.022734   4.067 4.76e-05 ***
## prepotency4go  0.001956   0.024904   0.079    0.937    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Correlation of Fixed Effects:
##             (Intr) prptn3
## prepotncy3g -0.344       
## prepotncy4g -0.313  0.411</code></pre>
<pre class="r"><code>FE &lt;- fixef(acc_mod)

P_FA &lt;- c(arm::invlogit(FE[&#39;(Intercept)&#39;]),
          arm::invlogit(sum(FE[c(&#39;(Intercept)&#39;, &#39;prepotency3go&#39;)])),
          arm::invlogit(sum(FE[c(&#39;(Intercept)&#39;, &#39;prepotency4go&#39;)])))

knitr::kable(dplyr::tibble(&#39;Number of previous &quot;GO&quot;s&#39; = 2:4,
                           &#39;Probability of FA&#39; = round(P_FA, 2)))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">Number of previous &quot;GO&quot;s</th>
<th align="right">Probability of FA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2</td>
<td align="right">0.31</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="right">0.33</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="right">0.31</td>
</tr>
</tbody>
</table>
<p>By run and trail-number?</p>
<pre class="r"><code>carit_FA_frame[, prepotency_cont := as.numeric(gsub(&#39;go&#39;, &#39;&#39;, prepotency)) - 3]
acc_mod_expanded.fn &lt;- &#39;acc_mod_expanded.RDS&#39;
if(!file.exists(acc_mod_expanded.fn)){
  acc_mod_expanded &lt;- glmer(is_FA ~ 1 + prepotency*runN_fac*trialNum_s + (1 | sID),
                            data = carit_FA_frame, family = &#39;binomial&#39;)
  saveRDS(acc_mod_expanded, file = acc_mod_expanded.fn)
} else {
  acc_mod_expanded &lt;- readRDS(file = acc_mod_expanded.fn)
}
summary(acc_mod_expanded)</code></pre>
<pre><code>## Generalized linear mixed model fit by maximum likelihood (Laplace
##   Approximation) [glmerMod]
##  Family: binomial  ( logit )
## Formula: is_FA ~ 1 + prepotency * runN_fac * trialNum_s + (1 | sID)
##    Data: carit_FA_frame
## 
##      AIC      BIC   logLik deviance df.resid 
##  62766.6  62882.0 -31370.3  62740.6    52850 
## 
## Scaled residuals: 
##     Min      1Q  Median      3Q     Max 
## -3.0319 -0.6890 -0.4611  0.9285  3.7504 
## 
## Random effects:
##  Groups Name        Variance Std.Dev.
##  sID    (Intercept) 0.7668   0.8757  
## Number of obs: 52863, groups:  sID, 1178
## 
## Fixed effects:
##                                    Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)                        -0.83143    0.03328 -24.986  &lt; 2e-16 ***
## prepotency3go                       0.05681    0.03213   1.768 0.077035 .  
## prepotency4go                       0.01036    0.03789   0.273 0.784560    
## runN_fac2                           0.13115    0.03116   4.209 2.57e-05 ***
## trialNum_s                          0.02609    0.01948   1.339 0.180597    
## prepotency3go:runN_fac2            -0.01241    0.04642  -0.267 0.789244    
## prepotency4go:runN_fac2            -0.05741    0.05293  -1.085 0.278092    
## prepotency3go:trialNum_s           -0.24815    0.02968  -8.360  &lt; 2e-16 ***
## prepotency4go:trialNum_s           -0.08947    0.04859  -1.841 0.065560 .  
## runN_fac2:trialNum_s                0.09701    0.02917   3.326 0.000882 ***
## prepotency3go:runN_fac2:trialNum_s  0.08772    0.04590   1.911 0.055993 .  
## prepotency4go:runN_fac2:trialNum_s  0.17811    0.05990   2.974 0.002944 ** 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Correlation of Fixed Effects:
##             (Intr) prptn3 prptn4 rnN_f2 trlNm_ pr3:N_2 pr4:N_2 pr3:N_ pr4:N_
## prepotncy3g -0.414                                                          
## prepotncy4g -0.351  0.363                                                   
## runN_fac2   -0.431  0.442  0.375                                            
## trialNum_s   0.004 -0.004 -0.004 -0.004                                     
## prptnc3:N_2  0.287 -0.692 -0.251 -0.656  0.003                              
## prptnc4:N_2  0.251 -0.260 -0.716 -0.575  0.003  0.386                       
## prptncy3:N_  0.000  0.166  0.002  0.002 -0.656 -0.115  -0.002               
## prptncy4:N_ -0.001  0.002 -0.382  0.002 -0.401 -0.001   0.274   0.263       
## rnN_fc2:tN_ -0.004  0.003  0.002  0.092 -0.668 -0.062  -0.054   0.438  0.268
## prp3:N_2:N_  0.001 -0.107 -0.002 -0.058  0.424  0.069   0.034  -0.646 -0.170
## prp4:N_2:N_  0.001 -0.001  0.310 -0.045  0.325  0.030  -0.250  -0.214 -0.811
##             rN_2:N p3:N_2:
## prepotncy3g               
## prepotncy4g               
## runN_fac2                 
## trialNum_s                
## prptnc3:N_2               
## prptnc4:N_2               
## prptncy3:N_               
## prptncy4:N_               
## rnN_fc2:tN_               
## prp3:N_2:N_ -0.635        
## prp4:N_2:N_ -0.487  0.309 
## optimizer (Nelder_Mead) convergence code: 0 (OK)
## Model failed to converge with max|grad| = 0.0345354 (tol = 0.002, component 1)</code></pre>
<pre class="r"><code>new_frame_FA &lt;- unique(carit_FA_frame[, c(&#39;prepotency&#39;, 
                                          &#39;trialNum_s&#39;, &#39;runN_fac&#39;,
                                          &#39;trialNum&#39;, &#39;runN&#39;)])

new_frame_FA[, p_FA := predict(acc_mod_expanded, newdata = new_frame_FA, re.form = ~0, type = &#39;response&#39;)]</code></pre>
<pre class="r"><code>ggplot(new_frame_FA, aes(x = trialNum, y = p_FA)) + 
  geom_point(aes(color = prepotency)) + 
  geom_line(aes(group = prepotency, color = prepotency)) + 
  scale_color_manual(values = c(apal[[2]], apal[[5]], apal[[4]]), name = &#39;N previous\n&quot;go&quot; trials&#39;) + 
  facet_wrap(~sprintf(&#39;Run %d&#39;, runN), ncol = 2) + 
  jftheme</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-55-1.png" width="768" /></p>
</div>
</div>
<div id="accuracy" class="section level1 tabset">
<h1>Accuracy</h1>
<pre class="r"><code>accuracy_summary &lt;- carit[, list(mean_accuracy = mean(corrRespCode, rm.na = TRUE),
             N_na = sum(is.na(corrRespCode)),
             age = unique(age)), 
             by = c(&#39;sID&#39;, &#39;trialType&#39;, &#39;runN&#39;)]

accuracy_summary_trialtype &lt;- dcast(accuracy_summary[, -&#39;N_na&#39;], ... ~ trialType, value.var = &#39;mean_accuracy&#39;)</code></pre>
<div id="missing-trials" class="section level2">
<h2>Missing trials</h2>
<p>This shouldn't happen: a missed go is a &quot;miss&quot; and a missed nogo is a &quot;correct rejection&quot;.</p>
<p>Number of missing trials across all participants: 8</p>
<pre class="r"><code>dt_table(accuracy_summary[N_na &gt; 0], caption = &#39;Participant-runs with missing trials&#39;)</code></pre>
<div id="htmlwidget-98f843d0550685495e6f" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-98f843d0550685495e6f">{"x":{"filter":"top","filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;go&quot;,&quot;nogo&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"1\" data-max=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"disabled\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"1\" data-max=\"5\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"10.414998255\" data-max=\"21.922421405\" data-scale=\"9\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons"],"caption":"<caption>Participant-runs with missing trials<\/caption>","data":[["HCD0737657","HCD1949879","HCD2061333","HCD2722755","HCD2722755","HCD2930055","HCD2930055","HCD2982276"],["go","go","nogo","go","nogo","go","go","go"],[1,2,1,1,1,1,2,1],[null,null,null,null,null,null,null,null],[2,1,1,5,2,2,2,1],[10.414998255,20.24,21.922421405,19.885418592,19.885418592,16.569813206,16.569813206,21.2]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th>sID<\/th>\n      <th>trialType<\/th>\n      <th>runN<\/th>\n      <th>mean_accuracy<\/th>\n      <th>N_na<\/th>\n      <th>age<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Bfrtip","buttons":["csv"],"columnDefs":[{"className":"dt-right","targets":[2,3,4,5]}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="no-button-presses" class="section level2">
<h2>No Button Presses</h2>
<p>If someone doesn't press, they'll get 0% accuracy for &quot;go&quot; trials and 100% accuracy for &quot;nogo&quot; trials.</p>
<p>Number of participants not pressing for at least 1 run: 12.</p>
<pre class="r"><code>setorder(accuracy_summary_trialtype, sID, runN) 
nopress_id &lt;- accuracy_summary_trialtype[go == 0 &amp; nogo == 1, c(&#39;sID&#39;, &#39;runN&#39;)]
dt_table(accuracy_summary_trialtype[go == 0 &amp; nogo == 1, 
                                    lapply(.SD, function(x) sprintf(fmt = &#39;%d%%&#39;, x*100)), 
                                    .SDcols = c(&#39;go&#39;, &#39;nogo&#39;), 
                                    by = c(&#39;sID&#39;, &#39;runN&#39;)],
         caption = &#39;Participant-runs with no responses&#39;)</code></pre>
<div id="htmlwidget-cacbe364ce8c31bb180a" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-cacbe364ce8c31bb180a">{"x":{"filter":"top","filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"1\" data-max=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"disabled\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"disabled\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons"],"caption":"<caption>Participant-runs with no responses<\/caption>","data":[["HCD0187850","HCD0541539","HCD0836356","HCD1327744","HCD1327744","HCD1481855","HCD2017330","HCD2115835","HCD2336346","HCD2344244","HCD2344244","HCD2556158","HCD2556158","HCD2692671","HCD2884377","HCD2884377"],[1,2,1,1,2,1,1,2,1,1,2,1,2,2,1,2],["0%","0%","0%","0%","0%","0%","0%","0%","0%","0%","0%","0%","0%","0%","0%","0%"],["100%","100%","100%","100%","100%","100%","100%","100%","100%","100%","100%","100%","100%","100%","100%","100%"]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th>sID<\/th>\n      <th>runN<\/th>\n      <th>go<\/th>\n      <th>nogo<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Bfrtip","buttons":["csv"],"columnDefs":[{"className":"dt-right","targets":1}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
<p>If someone presses all the time, they'll get 100% accuracy for &quot;go&quot; trials and 0% accuracy for &quot;nogo&quot; trials. Number of participants showing this pattern: 0.</p>
</div>
<div id="accuracy-by-age" class="section level2">
<h2>Accuracy by age</h2>
<pre class="r"><code>accuracy_summary[, run_text := sprintf(&#39;Run %d&#39;, runN)]
ggplot(accuracy_summary, aes(x = age, y = mean_accuracy)) + 
  geom_hex(aes(fill = ..count.., color = ..count..), binwidth = c(1, .05)) + 
  scale_fill_gradient(low = apal[[1]], high = apal[[5]], aesthetics = c(&#39;fill&#39;, &#39;color&#39;)) + 
  geom_line(stat = &#39;smooth&#39;, method = &#39;gam&#39;, color = apal[[2]], size = .5, alpha = 1) +
  geom_point(data = accuracy_summary[nopress_id, on = c(&#39;sID&#39;, &#39;runN&#39;)],
             color = apal[[4]], size = 1,
             position = position_jitter(w = .0625, h = .0125)) +
  facet_grid(trialType ~ run_text) +
  jftheme + 
  labs(x = &#39;Age (years)&#39;, y = &#39;Proportion correct&#39;, fill = &#39;Count&#39;, color = &#39;Count&#39;)</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-59-1.png" width="672" /></p>
<p>Points indicate participants who showed no presses on any trials.</p>
</div>
</div>
<div id="signal-detection-theory-metrics" class="section level1">
<h1>Signal detection theory metrics</h1>
<pre class="r"><code>carit_by_run_SDT_demo &lt;- demos[carit_by_run_SDT, on = &#39;sID&#39;]
carit_by_run_SDT_demo[, run_text := sprintf(&#39;Run %d&#39;, runN)]</code></pre>
<div id="age-2" class="section level2 tabset">
<h2>Age</h2>
<div id="dprime" class="section level3">
<h3><span class="math inline">\(d^{\prime}\)</span></h3>
<pre class="r"><code>ggplot(carit_by_run_SDT_demo, aes(x = age, y = dprime)) + 
  geom_hex(aes(fill = ..count.., color = ..count..), binwidth = c(1, .5)) + 
  scale_fill_gradient(low = apal[[1]], high = apal[[5]], aesthetics = c(&#39;fill&#39;, &#39;color&#39;)) + 
  geom_line(stat = &#39;smooth&#39;, method = &#39;gam&#39;, color = apal[[2]], size = .5, alpha = 1) +
  facet_grid( ~ run_text) +
  jftheme + 
  labs(x = &#39;Age (years)&#39;, y = &#39;d prime&#39;, fill = &#39;Count&#39;, color = &#39;Count&#39;)</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-61-1.png" width="576" /></p>
</div>
<div id="beta" class="section level3">
<h3><span class="math inline">\(\beta\)</span></h3>
<pre class="r"><code>ggplot(carit_by_run_SDT_demo, aes(x = age, y = beta)) + 
  geom_hex(aes(fill = ..count.., color = ..count..), binwidth = c(1, .25)) + 
  scale_fill_gradient(low = apal[[1]], high = apal[[5]], aesthetics = c(&#39;fill&#39;, &#39;color&#39;)) + 
  geom_line(stat = &#39;smooth&#39;, method = &#39;gam&#39;, color = apal[[2]], size = .5, alpha = 1) +
  facet_grid( ~ run_text) +
  jftheme + 
  coord_cartesian(y = c(0,2)) + 
  labs(x = &#39;Age (years)&#39;, y = &#39;beta&#39;, fill = &#39;Count&#39;, color = &#39;Count&#39;)</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-62-1.png" width="576" /></p>
</div>
<div id="aprime" class="section level3">
<h3><span class="math inline">\(A^{\prime}\)</span></h3>
<pre class="r"><code>ggplot(carit_by_run_SDT_demo, aes(x = age, y = aprime)) + 
  geom_hex(aes(fill = ..count.., color = ..count..), binwidth = c(1, .06125)) + 
  scale_fill_gradient(low = apal[[1]], high = apal[[5]], aesthetics = c(&#39;fill&#39;, &#39;color&#39;)) + 
  geom_line(stat = &#39;smooth&#39;, method = &#39;gam&#39;, color = apal[[2]], size = .5, alpha = 1) +
  facet_grid( ~ run_text) +
  jftheme + 
  labs(x = &#39;Age (years)&#39;, y = &#39;A prime&#39;, fill = &#39;Count&#39;, color = &#39;Count&#39;)</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-63-1.png" width="576" /></p>
</div>
<div id="bprimeprimed" class="section level3">
<h3><span class="math inline">\(B^{\prime\prime}D\)</span></h3>
<pre class="r"><code>ggplot(carit_by_run_SDT_demo, aes(x = age, y = bppd)) + 
  geom_hex(aes(fill = ..count.., color = ..count..), binwidth = c(1, .25)) + 
  scale_fill_gradient(low = apal[[1]], high = apal[[5]], aesthetics = c(&#39;fill&#39;, &#39;color&#39;)) + 
  geom_line(stat = &#39;smooth&#39;, method = &#39;gam&#39;, color = apal[[2]], size = .5, alpha = 1) +
  facet_grid( ~ run_text) +
  jftheme + 
  labs(x = &#39;Age (years)&#39;, y = &quot;B&#39;&#39;D&quot;, fill = &#39;Count&#39;, color = &#39;Count&#39;)</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-64-1.png" width="576" /></p>
</div>
<div id="c" class="section level3">
<h3><span class="math inline">\(c\)</span></h3>
<pre class="r"><code>ggplot(carit_by_run_SDT_demo, aes(x = age, y = c)) + 
  geom_hex(aes(fill = ..count.., color = ..count..), binwidth = c(1, .25)) + 
  scale_fill_gradient(low = apal[[1]], high = apal[[5]], aesthetics = c(&#39;fill&#39;, &#39;color&#39;)) + 
  geom_line(stat = &#39;smooth&#39;, method = &#39;gam&#39;, color = apal[[2]], size = .5, alpha = 1) +
  facet_grid( ~ run_text) +
  jftheme + 
  labs(x = &#39;Age (years)&#39;, y = &quot;c&quot;, fill = &#39;Count&#39;, color = &#39;Count&#39;)</code></pre>
<p><img src="carit_report_files/figure-html/unnamed-chunk-65-1.png" width="576" /></p>
</div>
</div>
</div>
<div id="modeling" class="section level1">
<h1>Modeling</h1>
<p>One really interesting question we can ask with these data is what is the effect of previous reward associations on go/nogo accuracy, and whether that effect differs by loss amount, or by age.</p>
<p>Using a hierarchical linear model (aka multilevel model) we can express this as a prediction of the probability of a correct rejection (no response on a &quot;no-go&quot; trial). We could also examine this effect on the probability of a hit (response on a &quot;go&quot; trial). For now, I'll limit it to the no-go trials, but incorrporating trial type would merely entail adding another interaction term.</p>
<p>Given that the trial-level data response is either 0 or 1 (false alarms or correct rejections), this will be a logisitic regression.</p>
<p>The model is:</p>
<pre><code>CR ~ 1 + prevrew + run + age + prevrew:run + prevrew:age + run:age + prevrew:run:age + prepotency</code></pre>
<p><span class="math display">\[
\text{CR} = \beta_0 + \beta_1\text{PrevRew} + \beta_2\text{Run} + \beta_3\text{Age} +\\ \beta_4\text{PrevRew}\cdot\text{Run} + \beta_5\text{PrevRew}\cdot\text{Age} + \\
\beta_6\text{Run}\cdot\text{Age} + \\
\beta_7\text{PrevRew}\cdot\text{Run}\cdot\text{Age} + \beta_8 \cdot \text{prepotency} +  \epsilon_{ij}
\]</span></p>
<p>where <span class="math inline">\(y_{ij}\)</span> is the <em>i</em>th response from the <em>j</em>th participant. Not shown is the random effects error terms or specific dummy coding.</p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
